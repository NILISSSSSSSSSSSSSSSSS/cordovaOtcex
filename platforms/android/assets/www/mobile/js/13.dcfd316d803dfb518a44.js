webpackJsonp([13],{Op1B:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("BO1k"),s=n.n(a),o=n("P9l9"),i=n("Izdj"),l=n("Q1XB"),r=n.n(l),c={mixins:[i.a],data:function(){return{active:0,address:"",phone:"",myPhone:"",email:"",showAddress:!0,showPhone:!1,showEmail:!1,phoneCode:"",googleCode:"",countDown:0,registerType:!1,selectCoin:!1,coin:"",currAmount:0,balance:"",amount:"",authMode:"phone",authlist:{},currencylist:[],relative:{},selectPhoneText:"CN +86",selectPhoneCode:!1,countryArr:[],callingCode:"86",userValue:"",valueType:"address",userTost:"wallets.input1"}},computed:{canSend:function(){return this.countDown>0},relativeUser:function(){var t="";return this.relative.username&&(t=" "+this.relative.username),t||""}},created:function(){this.$store.commit("setShowFooter",0),this._getTranInfo(),this.getCountryArr()},destroyed:function(){clearInterval(this.timmer)},watch:{relativeUser:function(t){}},methods:{formReset1:function(){this.address=this.shouJiHao=this.youXiang="",this.relativeMan=this.$t("transfer.noRelative")},onClickLeft:function(){this.$router.push("/wallets")},selectTransferWays:function(t){this.relative=this.phone=this.address=this.email="",t?1==t?(this.showPhone=!0,this.showEmail=this.showAddress=!1,this.valueType="phone"):(this.showEmail=!0,this.showAddress=this.showPhone=!1,this.valueType="email"):(this.showAddress=!0,this.showEmail=this.showPhone=!1,this.valueType="address")},onChangeCountry:function(t){var e=!0,n=!1,a=void 0;try{for(var o,i=s()(r.a);!(e=(o=i.next()).done);e=!0){var l=o.value;if(l.name===t){this.callingCode=l.callingCode,this.selectPhoneText=l.code+" +"+l.callingCode;break}}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}this.selectPhoneCode=!1},getCountryArr:function(){this.countryArr=r.a.map(function(t){return t.name})},sureSelectCoin:function(t){this.coin=t.currency,this.currAmount=t.currAmount||0,this.balance=""+t.currency+this.$t("wallets.yuE")+":"+t.currAmount,this.selectCoin=!1},selectAuthMode:function(t){0===t?this.authMode="phone":1===t&&(this.authMode="twoPhase")},_getTranInfo:function(){var t=this;Object(o.i)().then(function(e){0==e.code&&(t.authlist=e.data.authlist||{},t.currencylist=e.data.currencylist||[],t.myPhone=e.data.phone||"")})},handleRegister:function(){var t=this;if(this.address.trim()||!this.showAddress)if(this.phone.trim()||!this.showPhone)if(this.email.trim()||!this.showEmail)if(this.coin.trim())if(this.amount.toString().trim())if(this.isNumber(this.amount))if(this.amount-this.currAmount>0)this.$toast.fail(this.$t("wallets.amountMoreTan"));else{var e={destType:this.valueType,destVal:this.userValue,currency:this.coin.trim(),amount:parseFloat(this.amount),authMode:this.authMode};if("phone"==this.authMode){if(!this.phoneCode.trim())return void this.$toast.fail(this.$t("yanZheng.pleaseHolder1"));e.authCode=this.phoneCode.trim()}if("twoPhase"==this.authMode){if(!this.googleCode.trim())return void this.$toast.fail(this.$t("yanZheng.pleaseHolder2"));e.authCode=this.googleCode.trim()}this.transferOnce||(this.transferOnce=!0,Object(o.l)(e).then(function(e){t.transferOnce=!1,0==e.code&&(t.$toast.success(e.msg[0]||t.$t("wallets.zhuanZhangSuccess")),t.$router.push("/wallets"))}).catch(function(e){t.transferOnce=!1}))}else this.$toast.fail(this.$t("wallets.amountMoreTan2"));else this.$toast.fail(this.$t("wallets.input4"));else this.$toast.fail(this.$t("wallets.input2"));else this.$toast.fail(this.$t("wallets.emailBiTian"));else this.$toast.fail(this.$t("wallets.phoneBiTian"));else this.$toast.fail(this.$t("wallets.addressBiTian"))},relationUser:function(t){var e=this;console.log("relation address"),this.userValue=t.trim();var n={};this.showAddress?n={destType:"address",destVal:t.trim()}:this.showPhone?(n={destType:"phone",destVal:this.callingCode+t.trim()},this.userValue=this.callingCode+t.trim()):this.showEmail&&(n={destType:"email",destVal:t.trim()}),Object(o.b)(n).then(function(t){console.log(t),0==t.code?(e.relative=t.data,e.userTost=t.data.msg):e.relative={}}).catch(function(t){e.relative={}})},getCode:function(){var t=this;this.myPhone?this.coin?this.isNumber(this.amount)?this.amount-this.currAmount>0?this.$toast.fail(this.$t("wallets.amountMoreTan")):(this._countDown(),Object(o.a)({phone:this.myPhone}).then(function(e){0==e.code?t.$toast.success(t.$t("yanZheng.yanZhengMaTips")):t.$toast.fail(e.msg[0])})):this.$toast.fail(this.$t("wallets.amountMoreTan2")):this.$toast.fail(this.$t("wallets.input2")):this.$toast.fail(this.$t("yanZheng.shouJIweiKong"))},_countDown:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,n=(new Date).getTime()+e;this.timmer=setInterval(function(){t.countDown=((n-(new Date).getTime())/1e3).toFixed(0),t.countDown<=0&&clearInterval(t.timmer)},1e3)},isNumber:function(t){var e=+t;return e-e==0&&(!!e&&(e===t||"string"==typeof t&&(0!==e||""!==t.trim())))}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"register wallet-transfer"},[n("g-head",[n("van-nav-bar",{attrs:{title:t.$t("wallets.zanNeiZhuanZhang"),"left-arrow":""},on:{"click-left":t.onClickLeft}})],1),t._v(" "),n("van-tabs",{staticClass:"ways",on:{click:t.selectTransferWays},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{title:t.$t("wallets.addressTransfer")}}),t._v(" "),n("van-tab",{attrs:{title:t.$t("wallets.phoneTransfer")}}),t._v(" "),n("van-tab",{attrs:{title:t.$t("wallets.emailTransfer")}})],1),t._v(" "),n("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:t.showAddress,expression:"showAddress"}]},[n("van-field",{attrs:{center:"",label:t.$t("wallets.qianBaoDiZhi"),placeholder:t.$t("wallets.inputMoneyAddress"),icon:"clear"},on:{"click-icon":function(e){t.address=""}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}},[n("van-button",{attrs:{slot:"button",size:"small",disabled:!t.address,type:"primary"},on:{click:function(e){t.relationUser(t.address)}},slot:"button"},[t._v(" "+t._s(t.$t("wallets.guanLianYongHu")))])],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPhone,expression:"showPhone"}]},[n("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:t.selectPhoneCode,callback:function(e){t.selectPhoneCode=e},expression:"selectPhoneCode"}},[n("van-picker",{attrs:{columns:t.countryArr,"show-toolbar":""},on:{confirm:t.onChangeCountry,cancel:function(e){t.selectPhoneCode=!1}}})],1),t._v(" "),n("van-cell",{attrs:{title:t.$t("account.selectRegion"),"is-link":"",value:t.selectPhoneText},on:{click:function(e){t.selectPhoneCode=!0}}}),t._v(" "),n("van-cell-group",[n("van-field",{attrs:{label:t.$t("account.phoneNumber"),icon:"clear",placeholder:t.$t("account.inputPhoneNumber")},on:{"click-icon":function(e){t.phone=""}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}},[n("van-button",{attrs:{slot:"button",size:"small",disabled:!t.phone,type:"primary"},on:{click:function(e){t.relationUser(t.phone)}},slot:"button"},[t._v(" "+t._s(t.$t("wallets.guanLianYongHu")))])],1)],1)],1),t._v(" "),n("van-cell-group",[n("van-field",{directives:[{name:"show",rawName:"v-show",value:t.showEmail,expression:"showEmail"}],attrs:{center:"",label:t.$t("wallets.emailTransfer"),placeholder:t.$t("wallets.otherEmail"),icon:"clear"},on:{"click-icon":function(e){t.email=""}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}},[n("van-button",{attrs:{slot:"button",size:"small",disabled:!t.email,type:"primary"},on:{click:function(e){t.relationUser(t.email)}},slot:"button"},[t._v(" "+t._s(t.$t("wallets.guanLianYongHu")))])],1),t._v(" "),n("van-field",{attrs:{center:"",label:t.$t("wallets.guanLianYongHu"),disabled:"",placeholder:t.$t(t.userTost)},model:{value:t.relativeUser,callback:function(e){t.relativeUser=e},expression:"relativeUser"}}),t._v(" "),n("van-popup",{attrs:{position:"bottom"},model:{value:t.selectCoin,callback:function(e){t.selectCoin=e},expression:"selectCoin"}},[n("van-picker",{attrs:{"cancel-button-text":t.$t("common.cancel"),"confirm-button-text":t.$t("common.sure"),columns:t.currencylist,"value-key":"currency","show-toolbar":""},on:{confirm:t.sureSelectCoin,cancel:function(e){t.selectCoin=!1}}})],1),t._v(" "),n("van-cell",{attrs:{title:t.$t("wallets.input2"),"is-link":"",value:t.coin,center:""},on:{click:function(e){t.selectCoin=!0}}},[t._v(t._s(t.balance))]),t._v(" "),n("van-field",{attrs:{center:"",label:t.$t("wallets.input3"),type:"number",placeholder:t.$t("wallets.input4"),icon:"clear"},on:{"click-icon":function(e){t.amount=""}},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),n("van-tabs",{staticClass:"code-box",on:{click:t.selectAuthMode},model:{value:t.authMode,callback:function(e){t.authMode=e},expression:"authMode"}},[n("van-tab",{attrs:{title:t.$t("yanZheng.duanXinYanZheng")}},[t.authlist.phone?n("van-field",{attrs:{center:"",label:t.$t("yanZheng.yanZhengMa"),placeholder:t.$t("yanZheng.pleaseHolder1"),icon:"clear"},on:{"click-icon":function(e){t.phoneCode=""}},model:{value:t.phoneCode,callback:function(e){t.phoneCode=e},expression:"phoneCode"}},[n("van-button",{attrs:{slot:"button",disabled:t.canSend,size:"small",type:"primary"},on:{click:t.getCode},slot:"button"},[t._v("\n                         "+t._s(t.$t("yanZheng.sendCode"))+"\n                        "),t.countDown>0?n("span",[t._v(" ("+t._s(t.countDown)+")")]):t._e()])],1):n("van-cell",{attrs:{title:t.$t("yanZheng.goToGuanWang1")+" "+(t.systemConfig.siteDomain?t.systemConfig.siteDomain:"")+t.$t("yanZheng.mobileBngDing")}})],1),t._v(" "),n("van-tab",{attrs:{title:t.$t("yanZheng.code_google")}},[t.authlist.twoPhase?n("van-field",{attrs:{center:"",label:t.$t("yanZheng.yanZhengMa"),placeholder:t.$t("yanZheng.pleaseHolder2"),icon:"clear"},on:{"click-icon":function(e){t.googleCode=""}},model:{value:t.googleCode,callback:function(e){t.googleCode=e},expression:"googleCode"}}):n("van-cell",{attrs:{title:t.$t("yanZheng.goToGuanWang1")+" "+(t.systemConfig.siteDomain?t.systemConfig.siteDomain:"")+t.$t("yanZheng.googleErCiYAnZheng")}})],1)],1)],1),t._v(" "),n("div",{staticClass:"submit"},[n("van-button",{attrs:{type:"primary"},on:{click:t.handleRegister}},[t._v(" "+t._s(t.$t("common.tiJiao")))])],1)],1)},staticRenderFns:[]};var u=n("VU/8")(c,h,!1,function(t){n("uDWf"),n("i5mG")},"data-v-dba818ba",null);e.default=u.exports},i5mG:function(t,e){},uDWf:function(t,e){}});