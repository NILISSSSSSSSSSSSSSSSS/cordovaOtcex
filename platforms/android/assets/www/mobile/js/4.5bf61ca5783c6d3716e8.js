webpackJsonp([4],{"1cOF":function(t,e){},"9s12":function(t,e){},HxqP:function(t,e){},JtPr:function(t,e){},SAYo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("1zv/"),o={props:{orderInfo:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1}},methods:{evaluate:function(t){return"good"===t?this.$t("trade.haoPing"):"bad"===t?this.$t("trade.caPing"):"middle"===t?this.$t("trade.zhongPing"):t}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-info"},[t.orderInfo.orderType?a("van-list",{attrs:{finished:!0},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("van-cell",[[a("div",{staticClass:"item"},[a("div",{staticClass:"code"},[t._v("\n            "+t._s(t.$t("common.dingDanBianHao"))+"："+t._s(t.orderInfo.orderCode)+"\n          ")]),t._v(" "),a("div",{staticClass:"status tradeStatus"},[t._v("\n            "+t._s(t.$t("status['"+t.orderInfo.orderStatus+"']"))+"\n          ")])])]],2),t._v(" "),a("van-cell",[[a("div",{staticClass:"item"},[a("div",{staticClass:"code"},[t._v("\n             "+t._s(t.$t("common.jiaoYiJinE"))+"：\n          ")]),t._v(" "),a("div",{staticClass:"status"},[t._v("\n            "+t._s(t.orderInfo.fiatCurrencyAmount.toFixed(6))+"\n            "+t._s(t.orderInfo.fiatCurrency)+"\n          ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"code"},[t._v("\n             "+t._s(t.$t("common.jiaoYiAmount"))+"：\n          ")]),t._v(" "),a("div",{staticClass:"status"},[t._v("\n            "+t._s(t.orderInfo.currencyAmount.toFixed(6))+"\n            "+t._s(t.orderInfo.currency)+"\n          ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"code"},[t._v("\n            "+t._s(t.$t("common.danJia"))+"：\n          ")]),t._v(" "),a("div",{staticClass:"status"},[t._v("\n            "+t._s(t.orderInfo.unitPrice.toFixed(6))+"\n            "+t._s(t.orderInfo.fiatCurrency)+"\n          ")])])]],2),t._v(" "),a("van-cell",[[a("div",{staticClass:"item2"},[a("div",{staticClass:"l"},[t._v("\n            "+t._s(t.$t("common.jiaoYiBeiZhu"))+"：\n          ")]),t._v(" "),a("div",{staticClass:"r",domProps:{innerHTML:t._s(t.orderInfo.remark)}})])]],2),t._v(" "),a("van-cell",[[a("div",{staticClass:"item2"},[a("div",{staticClass:"l"},[t._v("\n            "+t._s(t.$t("common.jiaoYiShuoMing"))+"：\n          ")]),t._v(" "),a("div",{staticClass:"r",domProps:{innerHTML:t._s(t.orderInfo.desc)}})])]],2),t._v(" "),"success"===t.orderInfo.status?a("van-cell",[[a("div",{staticClass:"item3"},[a("div",{staticClass:"l"},[t._v("\n             "+t._s(t.$t("trade.pingJia1"))+"：\n          ")]),t._v(" "),a("div",{staticClass:"r"},[t.orderInfo.commentToOther.comment?a("span",[t._v("\n              "+t._s(t.orderInfo.commentToOther.str)+"\n              "),a("strong",[t._v("\n                ("+t._s(t.evaluate(t.orderInfo.commentToOther.comment))+")\n              ")])]):a("span",{staticStyle:{color:"gray"}},[t._v(" "+t._s(t.$t("trade.zanWu")))])])]),t._v(" "),a("div",{staticClass:"item3"},[a("div",{staticClass:"l"},[t._v("\n            "+t._s(t.$t("trade.pingJia2"))+"：\n          ")]),t._v(" "),a("div",{staticClass:"r"},[t.orderInfo.commentToMe.comment?a("span",[t._v("\n              "+t._s(t.orderInfo.commentToMe.str)+"\n              "),a("strong",[t._v("\n                ("+t._s(t.evaluate(t.orderInfo.commentToMe.comment))+")\n              ")])]):a("span",{staticStyle:{color:"gray"}},[t._v(t._s(t.$t("trade.zanWu")))])])])]],2):t._e()],1):t._e()],1)},staticRenderFns:[]};var i=a("VU/8")(o,n,!1,function(t){a("c3DV")},"data-v-68e2229f",null).exports,r={props:{orderInfo:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,show:!1}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay-info"},[t.orderInfo.payType?s("van-list",{attrs:{finished:!0},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("van-cell",[[s("span",{staticClass:"label"},[t._v(t._s(t.$t("common.zhiFuXinXi"))+":")]),t._v(" "),s("span",{staticClass:"payImg",on:{click:function(e){t.show=!0}}},[s("img",{attrs:{width:"25",src:a("Rjej")("./payment_"+t.orderInfo.payType+".png")}})])]],2)],1):t._e(),t._v(" "),s("van-popup",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.orderInfo.tradeQRCode?[t.orderInfo.tradeQRCode.uploadfile?s("img",{attrs:{width:"240",src:t.orderInfo.tradeQRCode.uploadfile}}):s("span",{staticClass:"no-qrcode"},[t._v(t._s(t.$t("trade.erWeiMa1")))])]:t._e()],2)],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(t){a("tRRO")},"data-v-157319c1",null).exports,l=a("woOf"),u=a.n(l),m=a("Dd8w"),p=a.n(m),v=a("NYxO"),h={props:{orderInfo:{type:Object,default:function(){return{}}},status:{type:String,default:""}},data:function(){return{time:"----",show:!1,showAppeal:!1,showEvaluate:!1,remark:"",sellerText:"",appeal:{appealType:"",msg:""},evaluate:{comment:"good",str:""}}},computed:p()({},Object(v.b)(["getSystem","getUserId","getAppealId"]),{showText:function(){return"waitPay"===this.status&&"buy"===this.orderInfo.orderType&&"normal"===this.orderInfo.appealStatus},showBuyer:function(){return("waitPay"===this.status||"waitCoin"===this.status)&&"buy"===this.orderInfo.orderType&&"normal"===this.orderInfo.appealStatus},showBuyer01:function(){return"waitPay"===this.status&&"buy"===this.orderInfo.orderType},showBuyer02:function(){return"waitCoin"===this.status&&"buy"===this.orderInfo.orderType},showSeller:function(){return("waitPay"===this.status||"waitCoin"===this.status)&&"sell"===this.orderInfo.orderType&&"normal"===this.orderInfo.appealStatus},canRelease:function(){return"waitPay"===this.status?(this.sellerText=this.$t("common.waitFuKuan"),!0):"waitCoin"!==this.status||(this.sellerText=this.$t("common.shiFangHuoBi"),!1)},endText:function(){return"success"===this.status?this.$t("common.jiaoYiWanCheng"):"cancel"===this.status?this.$t("common.jiaoYiQuXiao"):"expire"===this.status?this.$t("common.jiaoYiChaoShi"):void 0},dialogTitle:function(){return"buy"===this.orderInfo.orderType?this.$t("common.submitBuy"):"sell"===this.orderInfo.orderType?this.$t("common.shiFangHuoBi"):""},canEvaluate:function(){return"success"===this.status&&!this.orderInfo.commentToOther.comment},canCancelAppeal:function(){return"commit"===this.orderInfo.appealStatus&&this.getUserId===this.getAppealId}}),destroyed:function(){clearInterval(this.timmer)},watch:{orderInfo:{handler:function(t){t.expire&&this._countDown(t.expire)},deep:!0,immediate:!0},status:function(t){},getSystem:function(t){this.$emit("updateStatus")}},methods:{_orderUpdate:function(t){var e=this;this.remark||("buy"===this.orderInfo.orderType?this.remark=this.$t("common.fuKuanWanCheng"):this.remark=this.$t("common.yiShiFangHuoBi")),Object(s.j)({orderCode:this.orderInfo.orderCode,op:t,remark:this.remark}).then(function(a){0===a.code&&("affirm"===t&&(e.$toast(e.$t("operate.biaoJiChengGong")),e.$store.commit("setRemark",e.remark)),"cancel"===t&&e.$toast(e.$t("common.orderCancelSuccess")),"delay"===t&&e.$toast(e.$t("common.orderYanShiSuccess")),e.$emit("updateStatus"))})},handleUpdateOrder:function(t){var e=this;"affirm"===t&&(this.show=!0),"cancel"===t&&this.$dialog.confirm({title:this.$t("common.tiShi"),confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel"),message:this.$t("common.queRenQuXiaoDingDan")}).then(function(){e._orderUpdate(t)}).catch(function(){})},handleConfirm:function(){this._orderUpdate("affirm")},handleAppeal:function(){this.appeal.appealType?this._appeal():this.$toast.fail(this.$t("appeal.shenSuNotKong"))},handleEvaluate:function(){this._evaluate()},_countDown:function(t){var e=this;this.timmer&&clearInterval(this.timmer);var a=t;(new Date).getTime()>=a||(this.timmer=setInterval(function(){var t=((a-(new Date).getTime())/1e3).toFixed(0),s=t/60>=10?Math.floor(t/60):"0"+Math.floor(t/60),o=t%60>=10?Math.floor(t%60):"0"+Math.floor(t%60);e.time=s+":"+o,t<=0&&(clearInterval(e.timmer),setTimeout(function(){return e.$emit("updateStatus")},3e3),setTimeout(function(){return e.$emit("updateStatus")},5e3),setTimeout(function(){return e.$emit("updateStatus")},7e3),setTimeout(function(){return e.$emit("updateStatus")},9e3))},1e3))},_appeal:function(){var t=this;Object(s.a)(p()({orderCode:this.orderInfo.orderCode},this.appeal)).then(function(e){0===e.code&&(t.$toast(t.$t("appeal.tiJiaoShenSuSuccess")),t.$emit("updateStatus"))})},_evaluate:function(){var t=this;Object(s.e)(u()(this.evaluate,{orderCode:this.orderInfo.orderCode})).then(function(e){0===e.code&&(t.$emit("updateStatus"),t.$toast(t.$t("common.pingLunSuccess")))})},_cancelAppeal:function(){var t=this;this.$dialog.confirm({title:this.$t("common.tiShi"),message:this.$t("common.queRenQuXiaoShenSu")}).then(function(){Object(s.b)(t.orderInfo.orderCode).then(function(e){0===e.code&&t.$toast(t.$t("common.quXiaoShenSuChengGong"))})}).catch(function(){})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.orderInfo.orderType?a("div",{staticClass:"operate"},[t.showText?a("div",{staticClass:"text"},[a("p",{staticClass:"p1"},[a("span",[t._v(t._s(t.orderInfo.currency))]),t._v("\n      "+t._s(t.$t("operate.not1"))+"\n      "),a("span",[t._v(t._s(t.time))]),t._v("\n      "+t._s(t.$t("operate.not2"))+"\n    ")]),t._v(" "),a("p",{staticClass:"p2"},[t._v(t._s(t.$t("operate.not3")))]),t._v(" "),a("p",{staticClass:"p3",staticStyle:{color:"red"}},[t._v(t._s(t.$t("operate.not4")))])]):t._e(),t._v(" "),t.showBuyer?a("van-row",{staticClass:"submit"},[t.showBuyer01?[a("van-col",{attrs:{span:"9",offset:"2"}},[a("van-button",{on:{click:function(e){t.handleUpdateOrder("cancel")}}},[t._v(t._s(t.$t("operate.quXiaoJiaoYi")))])],1),t._v(" "),a("van-col",{attrs:{span:"9",offset:"2"}},[a("van-button",{attrs:{type:"primary"},on:{click:function(e){t.handleUpdateOrder("affirm")}}},[t._v(t._s(t.$t("operate.biaoJiFuKuan")))])],1)]:t._e(),t._v(" "),t.showBuyer02?[a("p",{staticClass:"p1"},[t._v(t._s(t.$t("operate.not5")))]),t._v(" "),a("van-col",{attrs:{span:"11",offset:"1"}},[a("van-button",{attrs:{disabled:""}},[t._v(t._s(t.$t("operate.not6")))])],1),t._v(" "),a("van-col",{attrs:{span:"11",offset:"1"}},[a("van-button",{on:{click:function(e){t.showAppeal=!0}}},[t._v(t._s(t.$t("operate.not7")))])],1)]:t._e()],2):t.showSeller?a("van-row",{staticClass:"end"},[a("van-col",{attrs:{span:"11",offset:"1"}},[a("van-button",{attrs:{disabled:t.canRelease},on:{click:function(e){t.handleUpdateOrder("affirm")}}},[t._v(t._s(t.sellerText))])],1),t._v(" "),a("van-col",{attrs:{span:"11",offset:"1"}},[a("van-button",{attrs:{disabled:t.canRelease},on:{click:function(e){t.showAppeal=!0}}},[t._v(t._s(t.$t("operate.not7")))])],1)],1):"normal"!==t.orderInfo.appealStatus?a("div",{staticClass:"appeal"},[a("p",[t._v(t._s(t.orderInfo.orderStatus))]),t._v(" "),t.canCancelAppeal?a("van-button",{staticStyle:{width:"120px"},on:{click:t._cancelAppeal}},[t._v(t._s(t.$t("common.pingJia")))]):t._e()],1):a("van-row",{staticClass:"end"},[a("van-col",{attrs:{span:"10",offset:"6"}},[a("van-button",{attrs:{disabled:""}},[t._v(t._s(t.endText))])],1)],1),t._v(" "),t.canEvaluate?a("van-row",{staticClass:"evaluate"},[a("van-col",{attrs:{span:"10",offset:"6"}},[a("van-button",{on:{click:function(e){t.showEvaluate=!0}}},[t._v(t._s(t.$t("common.pingJia")))])],1)],1):t._e(),t._v(" "),a("van-dialog",{staticClass:"dialog",attrs:{title:t.dialogTitle,confirmButtonText:t.$t("common.sure"),cancelButtonText:t.$t("common.cancel"),"show-cancel-button":""},on:{confirm:t.handleConfirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.showBuyer?a("div",[a("p",{staticClass:"p1"},[t._v(t._s(t.$t("operate.state1")))]),t._v(" "),a("p",{staticClass:"p2"},[t._v(t._s(t.$t("operate.state2")))]),t._v(" "),a("p",{staticClass:"p3"},[t._v(t._s(t.$t("operate.state3")))]),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{label:t.$t("operate.message1"),placeholder:t.$t("operate.message3"),rows:"2",autosize:""},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],1):a("div",[a("p",{staticClass:"p1"},[t._v(t._s(t.$t("operate.message4")))]),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{label:t.$t("operate.message3"),placeholder:t.$t("operate.message1"),rows:"2",autosize:""},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],1)]),t._v(" "),a("van-dialog",{staticClass:"dialog-appeal",attrs:{"show-cancel-button":"",title:t.$t("appeal.appeal")},on:{confirm:t.handleAppeal},model:{value:t.showAppeal,callback:function(e){t.showAppeal=e},expression:"showAppeal"}},[a("p",{staticClass:"p1"},[t._v(t._s(t.$t("appeal.must1")))]),t._v(" "),a("p",{staticClass:"p2"},[t._v(t._s(t.$t("appeal.must2")))]),t._v(" "),a("p",{staticClass:"p3"},[t._v(t._s(t.$t("appeal.must3")))]),t._v(" "),a("p",{staticClass:"p4"},[t._v(t._s(t.$t("appeal.appealType"))+"：")]),t._v(" "),a("van-radio-group",{model:{value:t.appeal.appealType,callback:function(e){t.$set(t.appeal,"appealType",e)},expression:"appeal.appealType"}},[a("van-radio",{attrs:{name:"no_pay"}},[t._v(t._s(t.$t("appeal.typeList.no_pay")))]),t._v(" "),a("van-radio",{attrs:{name:"no_coin"}},[t._v(t._s(t.$t("appeal.typeList.no_coin")))]),t._v(" "),a("van-radio",{attrs:{name:"no_response"}},[t._v(t._s(t.$t("appeal.typeList.no_response")))]),t._v(" "),a("van-radio",{attrs:{name:"spite"}},[t._v(t._s(t.$t("appeal.typeList.spite")))]),t._v(" "),a("van-radio",{attrs:{name:"other"}},[t._v(t._s(t.$t("appeal.typeList.other")))])],1),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{type:"textarea",placeholder:t.$t("appeal.textarea"),rows:1},model:{value:t.appeal.msg,callback:function(e){t.$set(t.appeal,"msg",e)},expression:"appeal.msg"}})],1)],1),t._v(" "),a("van-dialog",{staticClass:"dialog-evaluate",attrs:{"show-cancel-button":"",title:t.$t("common.pingJia")},on:{confirm:t.handleEvaluate},model:{value:t.showEvaluate,callback:function(e){t.showEvaluate=e},expression:"showEvaluate"}},[a("van-radio-group",{model:{value:t.evaluate.comment,callback:function(e){t.$set(t.evaluate,"comment",e)},expression:"evaluate.comment"}},[a("van-radio",{attrs:{name:"good"}},[t._v(t._s(t.$t("common.haoPing")))]),t._v(" "),a("van-radio",{attrs:{name:"middle"}},[t._v(t._s(t.$t("common.zhongPing")))]),t._v(" "),a("van-radio",{attrs:{name:"bad"}},[t._v(t._s(t.$t("common.caPing")))])],1),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{type:"textarea",placeholder:t.$t("common.pingJiaCon"),rows:1},model:{value:t.evaluate.str,callback:function(e){t.$set(t.evaluate,"str",e)},expression:"evaluate.str"}})],1)],1)],1):t._e()},staticRenderFns:[]};var g=a("VU/8")(h,f,!1,function(t){a("HxqP")},"data-v-41d261de",null).exports,_=a("BO1k"),$=a.n(_),C={mixins:[a("Izdj").a],props:{socketId:String},data:function(){return{messages:[],defaultAvatar:a("pBnh"),chatRecord:[],userId:""}},computed:p()({},Object(v.b)(["getMessages"])),created:function(){this.getRecord(),this.getMsg();var t="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,e=t.replace(/hidden/i,"visibilitychange");document.addEventListener(e,function(){document[t]||(document.title=this.systemConfig.siteName||"")})},watch:{"$route.params.id":{handler:function(){this.messages=[],this.chatRecord=[],this.getRecord()}},messages:{handler:function(t){var e=this;this.$nextTick().then(function(){e.toBottom(e.$refs.chatMessage)})},deep:!0}},methods:{toBottom:function(t){t.scrollTop=t.scrollHeight-t.clientHeight},getMsg:function(){var t=this;this.$socket.on("msg",function(e){if(document.visibilityState&&"hidden"==document.visibilityState&&(document.title=t.$t("chat.msg1")),e.from!=t.socketId){"system"==e.msgType?(t.$t("chat.msg0"),{body:e.context}):"img"==e.msgType?(e.nickName,{icon:e.avatar?e.avatar:t.defaultAvatar,body:"[图片]"}):(e.nickName,{icon:e.avatar?e.avatar:t.defaultAvatar,body:e.context})}console.log(e),t.messages.push(u()({},e,{userId:e.from})),"system"===e.msgType&&(t.$store.commit("setSystem",e.context),"appeal"===e.context&&t.$store.commit("setAppealId",e.userId))})},getRecord:function(){var t=this,e=this.$route;this.orderCode=e.params.id,Object(s.i)({id:this.orderCode}).then(function(e){if(0===e.code){t.chatRecord=e.data.chat,t.messages=t.chatRecord.concat([]);var a=!0,s=!1,o=void 0;try{for(var n,i=$()(t.messages.concat([]).reverse());!(a=(n=i.next()).done);a=!0){var r=n.value;if("system"===r.msgType&&"appeal"===r.context){t.$store.commit("setAppealId",r.userId);break}}}catch(t){s=!0,o=t}finally{try{!a&&i.return&&i.return()}finally{if(s)throw o}}t.userId=e.data.userId,t.$store.commit("setUserId",t.userId)}})},systemInfo:function(t){return"pay_ok"==t?this.$t("chat.msg2"):"cancel_order"==t?this.$t("chat.msg3"):"coin_ok"==t?this.$t("chat.msg4"):"delay"==t?this.$t("chat.msg5"):"appeal"==t?this.$t("chat.msg6"):"appeal_cancel"===t?this.$t("chat.msg7"):t}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"chatMessage",staticClass:"chat-message"},[a("div",{staticClass:"messages"},t._l(t.messages,function(e,s){return a("div",{key:s,staticClass:"item clearfix"},[a("div",{staticClass:"time"},[t._v(t._s(t.$timeFormat(e.time)))]),t._v(" "),"text"===e.msgType?a("div",[e.userId===t.userId?a("div",{staticClass:"self"},[a("span",{staticClass:"message"},[t._v(t._s(e.context))]),t._v(" "),a("img",{attrs:{src:e.avatar?e.avatar:t.defaultAvatar}})]):a("div",{staticClass:"other"},[a("img",{attrs:{src:e.avatar?e.avatar:t.defaultAvatar}}),t._v(" "),a("span",{staticClass:"message"},[t._v(t._s(e.context))])])]):t._e(),t._v(" "),"system"===e.msgType?a("div",{staticClass:"info"},[a("span",{staticClass:"message"},[t._v(t._s(t.systemInfo(e.context)))])]):t._e(),t._v(" "),"img"===e.msgType?a("div",[e.userId===t.userId?a("div",{staticClass:"self"},[a("span",{staticClass:"message"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.context}})]),t._v(" "),a("img",{attrs:{src:e.avatar?e.avatar:t.defaultAvatar}})]):a("div",{staticClass:"other"},[a("img",{attrs:{src:e.avatar?e.avatar:t.defaultAvatar}}),t._v(" "),a("span",{staticClass:"message"},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.context}})])])]):t._e()])}))])},staticRenderFns:[]};var k=a("VU/8")(C,y,!1,function(t){a("JtPr")},"data-v-7a150804",null).exports,I={data:function(){return{message:"",actionUrl:""}},computed:p()({},Object(v.b)(["getRemark"])),watch:{getRemark:function(t){var e={msgType:"text",context:t};this.$socket.emit("msg",e)}},created:function(){this.actionUrl=this.serverIP},methods:{afterRead:function(t){var e=this;console.log(t);var a=new FormData;a.append("img",t.file),Object(s.k)({url:this.actionUrl,file:a}).then(function(t){if(0===t.code){var a={msgType:"img",context:t.data};e.$socket.emit("msg",a)}})},oversize:function(){this.$toast.fail(this.$t("chat.chaoGuo1MB"))},sendMessage:function(){if(""!==this.message.trim()){var t={msgType:"text",context:this.message};this.$socket.emit("msg",t),this.message=""}}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-input"},[s("div",{staticClass:"can"},[s("van-uploader",{attrs:{"after-read":t.afterRead,action:t.actionUrl+"/websocket/uploadimg",accept:"image/png, image/jpeg, image/jpg",multiple:"","max-size":1048576},on:{oversize:t.oversize}},[s("van-icon",{attrs:{name:"photograph"}})],1),t._v(" "),s("van-cell-group",[s("van-field",{attrs:{placeholder:t.$t("chat.sendState")},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),t._v(" "),s("div",{staticClass:"send",on:{click:t.sendMessage}},[s("img",{attrs:{src:a("sLiS")}})])],1)])},staticRenderFns:[]};var T=a("VU/8")(I,w,!1,function(t){a("1cOF")},"data-v-24da6876",null).exports,b=a("hMcO"),A=a.n(b),x=a("DmT9"),S=a.n(x),j=a("/5sW"),B={data:function(){return{socketId:""}},computed:p()({},Object(v.b)(["getToken"])),created:function(){var t=this.$route.params.id;this.$socket?(console.log("has"),this.$socket.removeListener("joinok"),this.$socket.removeListener("joinerr"),this.$socket.removeListener("msg"),this.$socket.close(),""!==this.serverIP?this.$socket.io.uri=this.serverIP+"?token="+this.getToken+"&orderCode="+t:this.$socket.io.uri=window.location.host+"?token="+this.getToken+"&orderCode="+t,this.$socket.connect(),this.joinok(),this.joinerr()):(console.log("new"),""!==this.serverIP?j.default.use(A.a,S()(this.serverIP+"?token="+this.getToken+"&orderCode="+t)):j.default.use(A.a,S()(window.location.host+"?token="+this.getToken+"&orderCode="+t)),this.$socket.connect(),this.joinok(),this.joinerr())},destroyed:function(){console.log("destory"),this.$socket.removeListener("joinok"),this.$socket.removeListener("joinerr"),this.$socket.removeListener("msg"),this.$socket.close()},sockets:{connect:function(){console.log("socket connected")},customEmit:function(t){console.log('this method was fired by the socket server. eg: io.emit("customEmit", data)')}},watch:{"$route.params.id":function(t){console.log("switch");var e=t;this.$socket.close(),this.$socket.io.uri=this.serverIP+"?token="+this.getToken+"&orderCode="+e,this.$socket.connect()}},methods:{joinok:function(){var t=this;this.$socket.on("joinok",function(e){console.log("==========joinok"),t.socketId=e})},joinerr:function(){var t=this;this.$socket.on("joinerr",function(){console.log("err"),t.$socket.close(),t.$router.push("/user/login"),t.$toast.fail(t.$t("common.pleaseLogin"))})},close:function(){this.$socket.on("close",function(){console.log("close")})},upload:function(t){console.log("======up"),console.log(t)}},components:{ChatMessage:k,ChatInput:T}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat"},[e("chat-message",{staticClass:"chat-message",attrs:{socketId:this.socketId}}),this._v(" "),e("chat-input",{staticClass:"chat-input",on:{upload:this.upload}})],1)},staticRenderFns:[]};var M={data:function(){return{orderInfo:{},orderType:"",loading:!1}},computed:{title:function(){return this.orderType?""+("buy"===this.orderType?this.$t("common.gouMai"):this.$t("common.chuShou"))+this.orderInfo.currency+"("+this.orderInfo.otherUserName+")":""}},created:function(){this._getTradeDetails(),this.$store.commit("setShowFooter",0)},methods:{_getTradeDetails:function(){var t=this;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.loading=!0),this.id=this.$route.params.id,this.type="orderId"===this.$route.query.type?"orderId":"orderCode",this.id||this.$router.push("/trade"),Object(s.i)({id:this.id,type:this.type}).then(function(e){t.loading=!1,0===e.code&&(t.orderInfo=e.data,t.orderType=e.data.orderType)}).catch(function(e){t.loading=!1})},updateStatus:function(){this._getTradeDetails(!1)},onClickLeft:function(){this.$router.push("/orders"),this.$store.commit("setFooterActive",4),this.$store.commit("setShowFooter",1)},goTop:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}},components:{OrderInfo:i,PayInfo:d,Operate:g,Chat:a("VU/8")(B,R,!1,function(t){a("mxZR")},"data-v-13384403",null).exports}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"trading",staticClass:"trading"},[a("g-head",[a("van-nav-bar",{attrs:{title:t.title,"left-arrow":""},on:{"click-left":t.onClickLeft}})],1),t._v(" "),a("order-info",{attrs:{orderInfo:t.orderInfo}}),t._v(" "),a("pay-info",{attrs:{orderInfo:t.orderInfo}}),t._v(" "),a("operate",{attrs:{orderInfo:t.orderInfo,status:t.orderInfo.status},on:{updateStatus:t.updateStatus}}),t._v(" "),t.orderType?a("chat"):t._e(),t._v(" "),a("div",{staticClass:"top",on:{click:t.goTop}},[a("van-icon",{attrs:{name:"upgrade"}})],1),t._v(" "),t.loading?a("my-loading"):t._e()],1)},staticRenderFns:[]};var O=a("VU/8")(M,E,!1,function(t){a("9s12")},"data-v-e4761a0a",null);e.default=O.exports},c3DV:function(t,e){},mxZR:function(t,e){},sLiS:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADTElEQVRoQ+1Y7XHTQBDdrQCogKSCQAV41UBCBdABUAHuAFIB6YCkAS2pgFABoYNQwTHPsxIn+b4kncf2jO+vT3fv7b7dt2emI1985PjpRGDfGTxl4JSBwgio6hkRXRLRvYg8dJ8dtIRU9bmBfk9EKwP9JCIvDpqAqr4iog9EdEVEINEv59yfpmmQjc06mAxYtN8R0Uci6gEGFHYnIiB2GATatr1kZkikB5Upi08i8nWvBKwgEW0AT0U7xEVE5MdeCKhqB7oryMIe9H+biAxkv/MaSBVkBP01Eb0MSco5d980zYD8Tgh4BQmJoKNkF8AxMwoY3Qffhda1iGBPv6oSsIJEMcYAbIFyzv014LdEpBnCb0UE++oRWFiQkMva0OTAY9u5iDxWIWAFiWiXtr/+3k4uGAmsRgB+YFjjVI0NbFYXssu6TpK8MCTgTi4icoPfS8HbWQMDKybgzSMonqKCTHSXtYg8GXjUyZdc5L2zBgaWJaCqaFddtLNdJLbBl0u3R1UB/tvEQwcGFiWgqp9nOuQAz1guHnhEfdAKS4iMDSxIQFVRTLNd0gOy6S6dXDzwiHpxi+2+CxlYjABaGjIwa4XkYnpHwX9fEJwtA0tJCMMVsoD2iBdQdsXk4oEv6fGpe7YMLFvEXto3vd45t2JmzCjjFZSLgUfXQuSnTpzjO7YMrJiAf5L1bZC5YuaLlDYn9vho9GMGNouAf0vbto/M7ETkfHy7tckpPT4ln6CBLSagqngVYXJ87f9LMLPHpwgEDawGAej6NxENOoSq/lzo2GMyQQNbTAAHtG37wMzPfBmpqsu2rQkbYgZWhYCqwlGh9V5GNQmkmkQtAgMZ2fyEnl9rRQ2sCoGxjHZAIGpg1Qj4MjIHh6T65Zz7xczwjhtmfjMxNVEDq0mglxERYdbvZykDv/LeAMWzVs7AqhHwZYR/ju0NQWPw3YWQmWUjNJb4CUoaWFUCnow258bAeyQwneJZmRoWkwZWm8CZc27jCTnwfohB3Dm3xneB2kgaWFUCOMw6EOrhdvyQSRUuhj6T1IW/L2dg1QlM7C6D7fbHAWYrvMGxivSPjVX/mVtCwssi3hA3pVk8KAJzAnAiMCdqNb85ZaBmNOecdfQZ+AeTrItAn72cUQAAAABJRU5ErkJggg=="},tRRO:function(t,e){}});