webpackJsonp([14],{AlYI:function(e,t){},Fr70:function(e,t){},Op1B:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("BO1k"),s=n.n(a),o=n("P9l9"),i=n("Izdj"),l=n("Q1XB"),r=n.n(l),c={mixins:[i.a],data:function(){return{active:0,address:"",phone:"",myPhone:"",email:"",showAddress:!0,showPhone:!1,showEmail:!1,phoneCode:"",googleCode:"",countDown:0,registerType:!1,selectCoin:!1,coin:"",currAmount:0,balance:"",amount:"",authMode:"phone",authlist:{},currencylist:[],relative:{},selectPhoneText:"CN +86",selectPhoneCode:!1,countryArr:[],callingCode:"86",userValue:"",valueType:"address",userTost:"wallets.input1"}},computed:{canSend:function(){return this.countDown>0},relativeUser:function(){var e="";return this.relative.username&&(e=" "+this.relative.username),e||""}},created:function(){this.$store.commit("setShowFooter",0),this._getTranInfo(),this.getCountryArr()},destroyed:function(){clearInterval(this.timmer)},watch:{relativeUser:function(e){}},methods:{formReset1:function(){this.address=this.shouJiHao=this.youXiang="",this.relativeMan=this.$t("transfer.noRelative")},onClickLeft:function(){this.$router.push("/wallets")},selectTransferWays:function(e){this.relative=this.phone=this.address=this.email="",e?1==e?(this.showPhone=!0,this.showEmail=this.showAddress=!1,this.valueType="phone"):(this.showEmail=!0,this.showAddress=this.showPhone=!1,this.valueType="email"):(this.showAddress=!0,this.showEmail=this.showPhone=!1,this.valueType="address")},onChangeCountry:function(e){var t=!0,n=!1,a=void 0;try{for(var o,i=s()(r.a);!(t=(o=i.next()).done);t=!0){var l=o.value;if(l.name===e){this.callingCode=l.callingCode,this.selectPhoneText=l.code+" +"+l.callingCode;break}}}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}this.selectPhoneCode=!1},getCountryArr:function(){this.countryArr=r.a.map(function(e){return e.name})},sureSelectCoin:function(e){this.coin=e.currency,this.currAmount=e.currAmount||0,this.balance=""+e.currency+this.$t("wallets.yuE")+":"+e.currAmount,this.selectCoin=!1},selectAuthMode:function(e){0===e?this.authMode="phone":1===e&&(this.authMode="twoPhase")},_getTranInfo:function(){var e=this;Object(o.i)().then(function(t){0==t.code&&(e.authlist=t.data.authlist||{},e.currencylist=t.data.currencylist||[],e.myPhone=t.data.phone||"")})},handleRegister:function(){var e=this;if(this.address.trim()||!this.showAddress)if(this.phone.trim()||!this.showPhone)if(this.email.trim()||!this.showEmail)if(this.coin.trim())if(this.amount.toString().trim())if(this.isNumber(this.amount))if(this.amount-this.currAmount>0)this.$toast.fail(this.$t("wallets.amountMoreTan"));else{var t={destType:this.valueType,destVal:this.userValue,currency:this.coin.trim(),amount:parseFloat(this.amount),authMode:this.authMode};if("phone"==this.authMode){if(!this.phoneCode.trim())return void this.$toast.fail(this.$t("yanZheng.pleaseHolder1"));t.authCode=this.phoneCode.trim()}if("twoPhase"==this.authMode){if(!this.googleCode.trim())return void this.$toast.fail(this.$t("yanZheng.pleaseHolder2"));t.authCode=this.googleCode.trim()}this.transferOnce||(this.transferOnce=!0,Object(o.l)(t).then(function(t){e.transferOnce=!1,0==t.code&&(e.$toast.success(t.msg[0]||e.$t("wallets.zhuanZhangSuccess")),e.$router.push("/wallets"))}).catch(function(t){e.transferOnce=!1}))}else this.$toast.fail(this.$t("wallets.amountMoreTan2"));else this.$toast.fail(this.$t("wallets.input4"));else this.$toast.fail(this.$t("wallets.input2"));else this.$toast.fail(this.$t("wallets.emailBiTian"));else this.$toast.fail(this.$t("wallets.phoneBiTian"));else this.$toast.fail(this.$t("wallets.addressBiTian"))},relationUser:function(e){var t=this;console.log("relation address"),this.userValue=e.trim();var n={};this.showAddress?n={destType:"address",destVal:e.trim()}:this.showPhone?(n={destType:"phone",destVal:this.callingCode+e.trim()},this.userValue=this.callingCode+e.trim()):this.showEmail&&(n={destType:"email",destVal:e.trim()}),Object(o.b)(n).then(function(e){console.log(e),0==e.code?(t.relative=e.data,t.userTost=e.data.msg):t.relative={}}).catch(function(e){t.relative={}})},getCode:function(){var e=this;this.myPhone?this.coin?this.isNumber(this.amount)?this.amount-this.currAmount>0?this.$toast.fail(this.$t("wallets.amountMoreTan")):(this._countDown(),Object(o.a)({phone:this.myPhone}).then(function(t){0==t.code?e.$toast.success(e.$t("yanZheng.yanZhengMaTips")):e.$toast.fail(t.msg[0])})):this.$toast.fail(this.$t("wallets.amountMoreTan2")):this.$toast.fail(this.$t("wallets.input2")):this.$toast.fail(this.$t("yanZheng.shouJIweiKong"))},_countDown:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,n=(new Date).getTime()+t;this.timmer=setInterval(function(){e.countDown=((n-(new Date).getTime())/1e3).toFixed(0),e.countDown<=0&&clearInterval(e.timmer)},1e3)},isNumber:function(e){var t=+e;return t-t==0&&(!!t&&(t===e||"string"==typeof e&&(0!==t||""!==e.trim())))}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"register wallet-transfer"},[n("g-head",[n("van-nav-bar",{attrs:{title:e.$t("wallets.zanNeiZhuanZhang"),"left-arrow":""},on:{"click-left":e.onClickLeft}})],1),e._v(" "),n("van-tabs",{staticClass:"ways",on:{click:e.selectTransferWays},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("van-tab",{attrs:{title:e.$t("wallets.addressTransfer")}}),e._v(" "),n("van-tab",{attrs:{title:e.$t("wallets.phoneTransfer")}}),e._v(" "),n("van-tab",{attrs:{title:e.$t("wallets.emailTransfer")}})],1),e._v(" "),n("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:e.showAddress,expression:"showAddress"}]},[n("van-field",{attrs:{center:"",label:e.$t("wallets.qianBaoDiZhi"),placeholder:e.$t("wallets.inputMoneyAddress"),icon:"clear"},on:{"click-icon":function(t){e.address=""}},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},[n("van-button",{attrs:{slot:"button",size:"small",disabled:!e.address,type:"primary"},on:{click:function(t){e.relationUser(e.address)}},slot:"button"},[e._v(" "+e._s(e.$t("wallets.guanLianYongHu")))])],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPhone,expression:"showPhone"}]},[n("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:e.selectPhoneCode,callback:function(t){e.selectPhoneCode=t},expression:"selectPhoneCode"}},[n("van-picker",{attrs:{columns:e.countryArr,"show-toolbar":""},on:{confirm:e.onChangeCountry,cancel:function(t){e.selectPhoneCode=!1}}})],1),e._v(" "),n("van-cell",{attrs:{title:e.$t("account.selectRegion"),"is-link":"",value:e.selectPhoneText},on:{click:function(t){e.selectPhoneCode=!0}}}),e._v(" "),n("van-cell-group",[n("van-field",{attrs:{label:e.$t("account.phoneNumber"),icon:"clear",placeholder:e.$t("account.inputPhoneNumber")},on:{"click-icon":function(t){e.phone=""}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}},[n("van-button",{attrs:{slot:"button",size:"small",disabled:!e.phone,type:"primary"},on:{click:function(t){e.relationUser(e.phone)}},slot:"button"},[e._v(" "+e._s(e.$t("wallets.guanLianYongHu")))])],1)],1)],1),e._v(" "),n("van-cell-group",[n("van-field",{directives:[{name:"show",rawName:"v-show",value:e.showEmail,expression:"showEmail"}],attrs:{center:"",label:e.$t("wallets.emailTransfer"),placeholder:e.$t("wallets.otherEmail"),icon:"clear"},on:{"click-icon":function(t){e.email=""}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}},[n("van-button",{attrs:{slot:"button",size:"small",disabled:!e.email,type:"primary"},on:{click:function(t){e.relationUser(e.email)}},slot:"button"},[e._v(" "+e._s(e.$t("wallets.guanLianYongHu")))])],1),e._v(" "),n("van-field",{attrs:{center:"",label:e.$t("wallets.guanLianYongHu"),disabled:"",placeholder:e.$t(e.userTost)},model:{value:e.relativeUser,callback:function(t){e.relativeUser=t},expression:"relativeUser"}}),e._v(" "),n("van-popup",{attrs:{position:"bottom"},model:{value:e.selectCoin,callback:function(t){e.selectCoin=t},expression:"selectCoin"}},[n("van-picker",{attrs:{columns:e.currencylist,"value-key":"currency","show-toolbar":""},on:{confirm:e.sureSelectCoin,cancel:function(t){e.selectCoin=!1}}})],1),e._v(" "),n("van-cell",{attrs:{title:e.$t("wallets.input2"),"is-link":"",value:e.coin,center:""},on:{click:function(t){e.selectCoin=!0}}},[e._v(e._s(e.balance))]),e._v(" "),n("van-field",{attrs:{center:"",label:e.$t("wallets.input3"),type:"number",placeholder:e.$t("wallets.input4"),icon:"clear"},on:{"click-icon":function(t){e.amount=""}},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}),e._v(" "),n("van-tabs",{staticClass:"code-box",on:{click:e.selectAuthMode},model:{value:e.authMode,callback:function(t){e.authMode=t},expression:"authMode"}},[n("van-tab",{attrs:{title:e.$t("yanZheng.duanXinYanZheng")}},[e.authlist.phone?n("van-field",{attrs:{center:"",label:e.$t("yanZheng.yanZhengMa"),placeholder:e.$t("yanZheng.pleaseHolder1"),icon:"clear"},on:{"click-icon":function(t){e.phoneCode=""}},model:{value:e.phoneCode,callback:function(t){e.phoneCode=t},expression:"phoneCode"}},[n("van-button",{attrs:{slot:"button",disabled:e.canSend,size:"small",type:"primary"},on:{click:e.getCode},slot:"button"},[e._v("\n                         "+e._s(e.$t("yanZheng.sendCode"))+"\n                        "),e.countDown>0?n("span",[e._v(" ("+e._s(e.countDown)+")")]):e._e()])],1):n("van-cell",{attrs:{title:e.$t("yanZheng.goToGuanWang1")+" "+(e.systemConfig.siteDomain?e.systemConfig.siteDomain:"")+e.$t("yanZheng.mobileBngDing")}})],1),e._v(" "),n("van-tab",{attrs:{title:e.$t("yanZheng.code_google")}},[e.authlist.twoPhase?n("van-field",{attrs:{center:"",label:e.$t("yanZheng.yanZhengMa"),placeholder:e.$t("yanZheng.pleaseHolder2"),icon:"clear"},on:{"click-icon":function(t){e.googleCode=""}},model:{value:e.googleCode,callback:function(t){e.googleCode=t},expression:"googleCode"}}):n("van-cell",{attrs:{title:e.$t("yanZheng.goToGuanWang1")+" "+(e.systemConfig.siteDomain?e.systemConfig.siteDomain:"")+e.$t("yanZheng.googleErCiYAnZheng")}})],1)],1)],1),e._v(" "),n("div",{staticClass:"submit"},[n("van-button",{attrs:{type:"primary"},on:{click:e.handleRegister}},[e._v(" "+e._s(e.$t("common.tiJiao")))])],1)],1)},staticRenderFns:[]};var u=n("VU/8")(c,h,!1,function(e){n("AlYI"),n("Fr70")},"data-v-35c434ea",null);t.default=u.exports}});