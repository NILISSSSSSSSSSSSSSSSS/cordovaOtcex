webpackJsonp([16],{ChDN:function(e,t){},Op1B:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("pFYg"),i=n.n(o),s=n("BO1k"),a=n.n(s),l=n("P9l9"),c=n("Izdj"),h=n("Q1XB"),r=n.n(h),u=[{phone:"",isFirst:!0,selectPhoneText:"CN +86",callingCode:"86"}],d=[{email:"",isFirst:!0}],p={mixins:[c.a],data:function(){return{active:0,address:"",phone:"",phoneList:u,tmpPhoneIndex:0,myPhone:"",email:"",emailList:d,showAddress:!0,showPhone:!1,showEmail:!1,phoneCode:"",googleCode:"",countDown:0,registerType:!1,selectCoin:!1,coin:"",currAmount:"",balance:"",amount:"",authMode:"phone",authlist:{},currencylist:[],selectPhoneText:"CN +86",selectPhoneCode:!1,countryArr:[],callingCode:"86",userValue:"",valueType:"address",userTost:"wallets.input1",totalMoney:0}},computed:{canSend:function(){return this.countDown>0}},created:function(){this.$store.commit("setShowFooter",0),this._getTranInfo(),this.getCountryArr()},destroyed:function(){clearInterval(this.timmer)},methods:{addPhone:function(e,t){if(e){if(console.log("add"),!this.validateAmount(this.phoneList.length+1))return;this.phoneList.push({phone:"",isFirst:!1,selectPhoneText:"CN +86",callingCode:"86"})}else console.log("reduce"),this.phoneList.splice(t,1)},addEmail:function(e,t){if(e){if(console.log("add email"),!this.validateAmount(this.emailList.length+1))return;this.emailList.push({email:"",isFirst:!1})}else console.log("reduce email"),this.emailList.splice(t,1)},showPicker:function(e){this.tmpPhoneIndex=e,this.selectPhoneCode=!0},changeYue:function(e){},formReset1:function(){this.address=this.shouJiHao=this.youXiang=""},onClickLeft:function(){this.$router.push("/wallets")},selectTransferWays:function(e){e?1==e?(this.showPhone=!0,this.showEmail=this.showAddress=!1,this.valueType="phone"):(this.showEmail=!0,this.showAddress=this.showPhone=!1,this.valueType="email"):(this.showAddress=!0,this.showEmail=this.showPhone=!1,this.valueType="address")},clear:function(){this.phoneList=u,this.emailList=d,this.address="",this.amount="",this.phoneCode="",this.googleCode=""},onChangeCountry:function(e){var t=!0,n=!1,o=void 0;try{for(var i,s=a()(r.a);!(t=(i=s.next()).done);t=!0){var l=i.value;if(l.name===e){this.phoneList[this.tmpPhoneIndex].callingCode=l.callingCode,this.phoneList[this.tmpPhoneIndex].selectPhoneText=l.code+" +"+l.callingCode;break}}}catch(e){n=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw o}}this.selectPhoneCode=!1},getCountryArr:function(){this.countryArr=r.a.map(function(e){return e.name})},sureSelectCoin:function(e){this.clear(),this.coin=e.currency,this.totalMoney=e.currAmount,this.currAmount=e.currAmount,this.balance=""+e.currency+this.$t("wallets.yuE")+":",this.selectCoin=!1},selectAuthMode:function(e){0===e?this.authMode="phone":1===e&&(this.authMode="twoPhase")},_getTranInfo:function(){var e=this;Object(l.h)().then(function(t){0==t.code&&(e.authlist=t.data.authlist||{},e.currencylist=t.data.currencylist||[],e.myPhone=t.data.phone||"")})},handleRegister:function(){var e=this,t={destType:this.valueType,destVal:"",currency:this.coin.trim(),amount:parseFloat(this.amount),authMode:this.authMode};if(console.log(this.showAddress,this.showPhone,this.showEmail),this.coin.trim())if(this.amount.toString().trim()){if(this.validateAmount(this.phoneList.length))if(this.address.trim()||!this.showAddress){if(this.address.trim()&&this.showAddress&&(t.destVal=this.address),this.showPhone){var n=/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/,o=[];console.log(this.phoneList);for(var s=function(t){var i=e.phoneList[t].phone+"";if(console.log(i),!n.test(i))return e.$toast.fail(e.$t("wallets.rightPhone")),{v:void 0};if(o.length>0){if(o.findIndex(function(e){return e.phone===i})>-1)return e.$toast.fail(e.$t("wallets.repeatPhone")),{v:void 0};o.push({val:e.phoneList[t].callingCode+e.phoneList[t].phone,code:e.phoneList[t].callingCode,phone:e.phoneList[t].phone})}else o.push({val:e.phoneList[t].callingCode+e.phoneList[t].phone,code:e.phoneList[t].callingCode,phone:e.phoneList[t].phone})},a=0;a<this.phoneList.length;a++){var c=s(a);if("object"===(void 0===c?"undefined":i()(c)))return c.v}t.destVal=o}if(this.showEmail){var h=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,r=[],u=function(t){var n=e.emailList[t].email;if(!h.test(n))return e.$toast.fail(e.$t("wallets.rightEmail")),{v:void 0};if(r.length>0){if(r.findIndex(function(e){return e.val===n})>-1)return e.$toast.fail(e.$t("wallets.repeatEmail")),{v:void 0};r.push({val:n})}else r.push({val:n})};for(a=0;a<this.emailList.length;a++){var d=u(a);if("object"===(void 0===d?"undefined":i()(d)))return d.v}t.destVal=r}if(console.log(t),"phone"==this.authMode){if(!this.phoneCode.trim())return void this.$toast.fail(this.$t("yanZheng.pleaseHolder1"));t.authCode=this.phoneCode.trim()}if("twoPhase"==this.authMode){if(!this.googleCode.trim())return void this.$toast.fail(this.$t("yanZheng.pleaseHolder2"));t.authCode=this.googleCode.trim()}this.transferOnce||(this.transferOnce=!0,Object(l.k)(t).then(function(t){e.transferOnce=!1,0==t.code&&(e.$toast.success(t.msg[0]||e.$t("wallets.zhuanZhangSuccess")),e.$router.push("/wallets"))}).catch(function(t){e.transferOnce=!1}))}else this.$toast.fail(this.$t("wallets.addressBiTian"))}else this.$toast.fail(this.$t("wallets.input4"));else this.$toast.fail(this.$t("wallets.input2"))},getCode:function(){var e=this;this.myPhone?this.coin?this.validateAmount(this.phoneList.length)&&(this._countDown(),Object(l.a)({phone:this.myPhone}).then(function(t){0==t.code?e.$toast.success(e.$t("yanZheng.yanZhengMaTips")):e.$toast.fail(t.msg[0])})):this.$toast.fail(this.$t("wallets.input2")):this.$toast.fail(this.$t("yanZheng.shouJIweiKong"))},validateAmount:function(e){return this.coin?this.isNumber(this.amount)?!(this.amount*e-this.currAmount>0)||(this.$toast.fail(this.$t("wallets.balanceLess")),!1):(this.$toast.fail(this.$t("wallets.amountMoreTan2")),!1):(this.$toast.fail(this.$t("wallets.input2")),!1)},_countDown:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,n=(new Date).getTime()+t;this.timmer=setInterval(function(){e.countDown=((n-(new Date).getTime())/1e3).toFixed(0),e.countDown<=0&&clearInterval(e.timmer)},1e3)},isNumber:function(e){var t=+e;return t-t==0&&(!!t&&(t===e||"string"==typeof e&&(0!==t||""!==e.trim())))}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"register wallet-transfer"},[n("g-head",[n("van-nav-bar",{attrs:{title:e.$t("wallets.zanNeiZhuanZhang"),"left-arrow":""},on:{"click-left":e.onClickLeft}})],1),e._v(" "),n("van-cell",{attrs:{title:e.$t("wallets.input2"),"is-link":"",value:e.coin,center:""},on:{click:function(t){e.selectCoin=!0}}},[e._v(e._s(e.balance)+e._s(this.currAmount))]),e._v(" "),n("van-field",{attrs:{center:"",label:e.$t("wallets.input3"),type:"number",placeholder:e.$t("wallets.input4"),icon:"clear"},on:{input:e.changeYue,"click-icon":function(t){e.amount=""}},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}),e._v(" "),n("van-tabs",{staticClass:"ways",on:{click:e.selectTransferWays},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("van-tab",{attrs:{title:e.$t("wallets.addressTransfer")}}),e._v(" "),n("van-tab",{attrs:{title:e.$t("wallets.phoneTransfer")}}),e._v(" "),n("van-tab",{attrs:{title:e.$t("wallets.emailTransfer")}})],1),e._v(" "),n("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:e.showAddress,expression:"showAddress"}]},[n("van-field",{attrs:{center:"",label:e.$t("wallets.qianBaoDiZhi"),placeholder:e.$t("wallets.inputMoneyAddress"),icon:"clear"},on:{"click-icon":function(t){e.address=""}},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPhone,expression:"showPhone"}]},[n("van-cell-group",e._l(e.phoneList,function(t,o){return n("div",{key:o,staticClass:"phone-list"},[n("van-cell",{attrs:{title:e.$t("account.selectRegion"),"is-link":"",value:t.selectPhoneText},on:{click:function(t){e.showPicker(o)}}}),e._v(" "),n("i",{class:["icon","iconfont",t.isFirst?"icon-zengjia":"icon-jian"],staticStyle:{position:"absolute",top:"54px",right:"40px",color:"#38f","z-index":"555","font-size":"24px"},on:{click:function(n){e.addPhone(t.isFirst,o)}}}),e._v(" "),n("van-field",{attrs:{label:e.$t("account.phoneNumber"),clearable:"",icon:"close",placeholder:e.$t("account.inputPhoneNumber")},on:{"click-icon":function(e){t.phone=""}},model:{value:t.phone,callback:function(n){e.$set(t,"phone",n)},expression:"item.phone"}})],1)}))],1),e._v(" "),n("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:e.showEmail,expression:"showEmail"}]},e._l(e.emailList,function(t,o){return n("div",{key:o,staticClass:"phone-list"},[n("i",{class:["icon","iconfont",t.isFirst?"icon-zengjia":"icon-jian"],staticStyle:{position:"absolute",top:"9px",right:"40px",color:"#38f","z-index":"555","font-size":"24px"},on:{click:function(n){e.addEmail(t.isFirst,o)}}}),e._v(" "),n("van-field",{directives:[{name:"show",rawName:"v-show",value:e.showEmail,expression:"showEmail"}],attrs:{center:"",label:e.$t("wallets.emailTransfer"),placeholder:e.$t("wallets.otherEmail"),icon:"clear"},on:{"click-icon":function(e){t.email=""}},model:{value:t.email,callback:function(n){e.$set(t,"email",n)},expression:"item.email"}})],1)})),e._v(" "),n("van-cell-group",[n("van-tabs",{staticClass:"code-box",on:{click:e.selectAuthMode},model:{value:e.authMode,callback:function(t){e.authMode=t},expression:"authMode"}},[n("van-tab",{attrs:{title:e.$t("yanZheng.duanXinYanZheng")}},[e.authlist.phone?n("van-field",{attrs:{center:"",label:e.$t("yanZheng.yanZhengMa"),placeholder:e.$t("yanZheng.pleaseHolder1"),icon:"clear"},on:{"click-icon":function(t){e.phoneCode=""}},model:{value:e.phoneCode,callback:function(t){e.phoneCode=t},expression:"phoneCode"}},[n("van-button",{attrs:{slot:"button",disabled:e.canSend,size:"small",type:"primary"},on:{click:e.getCode},slot:"button"},[e._v("\n                         "+e._s(e.$t("yanZheng.sendCode"))+"\n                        "),e.countDown>0?n("span",[e._v(" ("+e._s(e.countDown)+")")]):e._e()])],1):n("van-cell",{attrs:{title:e.$t("yanZheng.goToGuanWang1")+" "+(e.systemConfig.siteDomain?e.systemConfig.siteDomain:"")+e.$t("yanZheng.mobileBngDing")}})],1),e._v(" "),n("van-tab",{attrs:{title:e.$t("yanZheng.code_google")}},[e.authlist.twoPhase?n("van-field",{attrs:{center:"",label:e.$t("yanZheng.yanZhengMa"),placeholder:e.$t("yanZheng.pleaseHolder2"),icon:"clear"},on:{"click-icon":function(t){e.googleCode=""}},model:{value:e.googleCode,callback:function(t){e.googleCode=t},expression:"googleCode"}}):n("van-cell",{attrs:{title:e.$t("yanZheng.goToGuanWang1")+" "+(e.systemConfig.siteDomain?e.systemConfig.siteDomain:"")+e.$t("yanZheng.googleErCiYAnZheng")}})],1)],1)],1),e._v(" "),n("div",{staticClass:"submit"},[n("van-button",{attrs:{type:"primary"},on:{click:e.handleRegister}},[e._v(" "+e._s(e.$t("common.tiJiao")))])],1),e._v(" "),n("van-popup",{attrs:{position:"bottom"},model:{value:e.selectCoin,callback:function(t){e.selectCoin=t},expression:"selectCoin"}},[n("van-picker",{attrs:{"cancel-button-text":e.$t("common.cancel"),"confirm-button-text":e.$t("common.sure"),columns:e.currencylist,"value-key":"currency","show-toolbar":""},on:{confirm:e.sureSelectCoin,cancel:function(t){e.selectCoin=!1}}})],1),e._v(" "),n("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:e.selectPhoneCode,callback:function(t){e.selectPhoneCode=t},expression:"selectPhoneCode"}},[n("van-picker",{attrs:{columns:e.countryArr,"show-toolbar":""},on:{confirm:e.onChangeCountry,cancel:function(t){e.selectPhoneCode=!1}}})],1)],1)},staticRenderFns:[]};var m=n("VU/8")(p,f,!1,function(e){n("ChDN"),n("UYgU")},"data-v-5373521f",null);t.default=m.exports},UYgU:function(e,t){}});