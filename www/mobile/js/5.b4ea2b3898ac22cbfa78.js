webpackJsonp([5],{"/wzs":function(e,t){},"8R2g":function(e,t){},KvKp:function(e,t,r){"use strict";t.a=function(e){var t=+e;if(t-e!=0)return!1;if(t===e)return!0;if("string"==typeof e)return 0!==t||""!==e.trim();return!1}},Mhjh:function(e,t){},SUrz:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("LKSW"),i=r("t5DY"),o=r("wnNT"),a=r("woOf"),c=r.n(a),s=r("pFYg"),u=r.n(s),l=r("BO1k"),f=r.n(l),m=r("KvKp"),v={props:{currencyArr:Array,fiatCurrency:Array,exchangeArr:Array,overPercentLimit:Object,payTypeCanUseArr:Array},data:function(){return{selectCurrency:!1,selectTradeType:!1,selectFiatCurrency:!1,selectExchange:!1,tradeTypeArr:[this.$t("common.gouMai"),this.$t("common.chushou")],fiatCurrencyArr:[],exchangeValue:0,forbiddenSubmit:!0,form:{currency:"",fiatCurrency:"CNY",tradeType:"buy",allowPay:[],isUSDT:!1,exchange:"average",overPercent:0,limitPrice:null,orderFloorPrice:null,orderCeilPrice:null,lockMinute:15,maxOrderLimit:15,tradeCountLimit:0,isIdentityVerify:!1,isadvancedVerify:!1,autoReplyBefore:""}}},computed:{tradeTypeText:function(){return"buy"===this.form.tradeType?this.$t("common.gouMai"):this.$t("common.chushou")},payArr:function(){var e=this,t=!0,r=!1,n=void 0;try{for(var i,o=f()(this.fiatCurrency);!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.name===this.form.fiatCurrency){var c=function(){var t=[];return a.allowPay.forEach(function(r){var n={payType:r},i=e.payTypeCanUseArr.findIndex(function(e){return e.payType==r});i>-1&&(n.canUse=e.payTypeCanUseArr[i].isOrderShow),t.push(n)}),{v:t}}();if("object"===(void 0===c?"undefined":u()(c)))return c.v}}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return[]},exchanges:function(){return this.exchangeArr.map(function(e){return e.name})},exchangeText:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=f()(this.exchangeArr);!(e=(n=i.next()).done);e=!0){var o=n.value;if(o.name===this.form.exchange)return this.exchangeValue=o.value,o.name+"("+o.value.toFixed(2)+")"}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}},overPercentScope:function(){return this.overPercentLimit.min?this.accuracy(this.overPercentLimit.min)+"% - "+this.accuracy(this.overPercentLimit.max)+"%":""},overPercentPrice:function(){return Object(m.a)(this.form.overPercent)?(+this.exchangeValue*(1+this.accuracy2(this.form.overPercent))).toFixed(2):this.exchangeValue.toFixed(2)},textBest:function(){return"buy"===this.form.tradeType?this.$t("common.jieShouZuiGao"):this.$t("common.jieShouZuiDiJia")},textFloor:function(){return"buy"===this.form.tradeType?this.$t("common.zuiXiaoXianE")+"("+this.form.currency+")":this.$t("common.zuiXiaoXianE")+"("+this.form.fiatCurrency+")"},textCeil:function(){return"buy"===this.form.tradeType?this.$t("common.zuiDaXianE")+"("+this.form.currency+")":this.$t("common.zuiDaXianE")+"("+this.form.fiatCurrency+")"},textTrade:function(){return"buy"===this.form.tradeType?this.$t("common.mai1"):this.$t("common.mai2")},textUSDT:function(){return"buy"===this.form.tradeType?this.$t("common.ask3"):this.$t("common.ask2")}},watch:{fiatCurrency:{handler:function(e){this.fiatCurrencyArr=e.map(function(e){return e.name})},deep:!0},currencyArr:{handler:function(e){this.form.currency=e[0]},deep:!0},form:{handler:function(e){this.canSubmit()},deep:!0}},methods:{gotoSetting:function(e){this.$router.push("/account/tradeSetting/"+e)},_submitAdver:function(){var e=this;this._isSubmit()&&Object(n.g)(c()({},this.form,{overPercent:this.accuracy2(this.form.overPercent)})).then(function(t){if(0===t.code){e.$toast("发布成功");var r=t.data.advertId;e.$router.push("/advertisement/detail/"+r)}})},accuracy:function(e){return 100*e},accuracy2:function(e){var t=String(e);if(-1===t.indexOf("."))return e/100;var r=t.split(".")[1].length;return e*Math.pow(10,r)/(100*Math.pow(10,r))},canSubmit:function(){for(var e in this.forbiddenSubmit=!0,this.form)if(this.form.hasOwnProperty(e)){if(null==this.form[e])return;if(this.form[e]instanceof Array&&0===this.form[e].length)return}this.forbiddenSubmit=!1},onChangeCurrency:function(e){this.selectCurrency=!1,this.form.currency=e,this.initForm(),this.$emit("updatePreset",this.form)},onChangeTradeType:function(e){this.selectTradeType=!1,this.form.tradeType="购买"===e?"buy":"sell",this.initForm(),this.$emit("updatePreset",this.form)},onChangeFiatCurrency:function(e){this.selectFiatCurrency=!1,this.form.fiatCurrency=e,this.initForm(),this.$emit("updatePreset",this.form)},onChangeExchange:function(e){this.selectExchange=!1,this.form.exchange=e},onChangeOverPercent:function(e){"-"!==e&&""!==e&&(Object(m.a)(e)||(this.form.overPercent=0))},initForm:function(){this.form.exchange="average",this.form.allowPay=[],this.form.orderFloorPrice=null,this.form.orderCeilPrice=null,this.form.limitPrice=null},_isSubmit:function(){if(!Object(m.a)(this.form.orderFloorPrice)||!Object(m.a)(this.form.orderCeilPrice)||!Object(m.a)(this.form.limitPrice))return this.$toast.fail("限额必须为数字"),!1;if(Number(this.form.overPercent)<100*this.overPercentLimit.min||Number(this.form.overPercent)>100*this.overPercentLimit.max||isNaN(Number(this.form.overPercent)))return this.$toast.fail("溢价设置超过限制"),!1;if(Number(this.form.orderFloorPrice)<0||Number(this.form.orderCeilPrice)<0)return this.$toast.fail("限额必须大于0"),!1;if(this.form.orderFloorPrice.toString().indexOf(".")>-1)if("buy"==this.form.tradeType){if(this.form.orderFloorPrice.replace(/^\d+\./,"").length>8)return this.$toast.fail("数字币最多保留小数点后8位"),!1}else if(this.form.orderFloorPrice.replace(/^\d+\./,"").length>2)return this.$toast.fail("法币最多保留小数点后2位"),!1;if(this.form.orderCeilPrice.toString().indexOf(".")>-1)if("buy"==this.form.tradeType){if(this.form.orderCeilPrice.replace(/^\d+\./,"").length>8)return this.$toast.fail("数字币最多保留小数点后8位"),!1}else if(this.form.orderCeilPrice.replace(/^\d+\./,"").length>2)return this.$toast.fail("法币最多保留小数点后2位"),!1;return Number(this.form.orderFloorPrice)>Number(this.form.orderCeilPrice)?(this.$toast.fail("最小限额不能大于最大限额"),!1):!(Number(this.form.orderFloorPrice)<0)||(this.$toast.fail("最小限额必须大于0"),!1)}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.currencyArr.length>0?r("div",{staticClass:"ad-form"},[r("div",{staticClass:"box d1"},[r("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:e.selectTradeType,callback:function(t){e.selectTradeType=t},expression:"selectTradeType"}},[r("van-picker",{attrs:{"cancel-button-text":e.$t("common.cancel"),"confirm-button-text":e.$t("common.sure"),columns:e.tradeTypeArr,"show-toolbar":""},on:{confirm:e.onChangeTradeType,cancel:function(t){e.selectTradeType=!1}}})],1),e._v(" "),r("van-cell",{attrs:{title:e.$t("common.jiaoYiLeiXing"),"is-link":"",value:e.tradeTypeText},on:{click:function(t){e.selectTradeType=!0}}}),e._v(" "),r("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:e.selectCurrency,callback:function(t){e.selectCurrency=t},expression:"selectCurrency"}},[r("van-picker",{attrs:{"cancel-button-text":e.$t("common.cancel"),"confirm-button-text":e.$t("common.sure"),columns:e.currencyArr,"show-toolbar":""},on:{confirm:e.onChangeCurrency,cancel:function(t){e.selectCurrency=!1}}})],1),e._v(" "),r("van-cell",{attrs:{title:e.$t("common.xuanZeBiZhong"),"is-link":"",value:e.form.currency},on:{click:function(t){e.selectCurrency=!0}}}),e._v(" "),r("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:e.selectFiatCurrency,callback:function(t){e.selectFiatCurrency=t},expression:"selectFiatCurrency"}},[r("van-picker",{attrs:{"cancel-button-text":e.$t("common.cancel"),"confirm-button-text":e.$t("common.sure"),columns:e.fiatCurrencyArr,"show-toolbar":""},on:{confirm:e.onChangeFiatCurrency,cancel:function(t){e.selectFiatCurrency=!1}}})],1),e._v(" "),r("van-cell",{attrs:{title:e.$t("common.huoBi"),"is-link":"",value:e.form.fiatCurrency},on:{click:function(t){e.selectFiatCurrency=!0}}})],1),e._v(" "),r("div",{staticClass:"box d2"},[r("div",{staticClass:"allow-pay"},[r("span",{staticClass:"text-pay"},[e._v(" "+e._s(e.$t("common.zhiFuFangShi"))+"：")]),e._v(" "),r("van-checkbox-group",{model:{value:e.form.allowPay,callback:function(t){e.$set(e.form,"allowPay",t)},expression:"form.allowPay"}},[r("van-cell-group",e._l(e.payArr,function(t,n){return r("van-cell",{key:n,attrs:{title:e._f("payTypeFilter")(t.payType)}},[r("div",{staticClass:"canUseBox"},[r("span",{staticClass:"gotoSet",on:{click:function(r){e.gotoSetting(t.payType)}}},[e._v(e._s(t.canUse?"":e.$t("common.qianQuYuSe")))]),e._v(" "),r("van-checkbox",{staticClass:"checkbox",attrs:{disabled:!t.canUse,name:t.payType}})],1)])}))],1)],1)]),e._v(" "),r("div",{staticClass:"box d2"},[r("div",{staticClass:"allow-pay"},[r("van-cell-group",[r("van-cell",{attrs:{title:e.textUSDT}},[r("van-checkbox",{model:{value:e.form.isUSDT,callback:function(t){e.$set(e.form,"isUSDT",t)},expression:"form.isUSDT"}})],1)],1)],1)]),e._v(" "),r("div",{staticClass:"box d1"},[r("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:e.selectExchange,callback:function(t){e.selectExchange=t},expression:"selectExchange"}},[r("van-picker",{attrs:{"cancel-button-text":e.$t("common.cancel"),"confirm-button-text":e.$t("common.sure"),columns:e.exchanges,"show-toolbar":""},on:{confirm:e.onChangeExchange,cancel:function(t){e.selectExchange=!1}}})],1),e._v(" "),r("van-cell",{attrs:{title:e.$t("common.duiBiaoJiaoYiSuo"),"is-link":"",value:e.exchangeText},on:{click:function(t){e.selectExchange=!0}}})],1),e._v(" "),r("div",{staticClass:"box"},[r("span",{staticClass:"text-pay"},[e._v(" "+e._s(e.$t("common.yiJia"))+e._s("("+e.overPercentPrice+")"))]),e._v(" "),r("van-cell-group",{staticClass:"over-percent"},[r("van-field",{on:{input:e.onChangeOverPercent},model:{value:e.form.overPercent,callback:function(t){e.$set(e.form,"overPercent",t)},expression:"form.overPercent"}})],1),e._v(" "),r("span",{staticClass:"scope"},[e._v(e._s(e.$t("common.yiJiaFanWei"))+"："+e._s(e.overPercentScope))])],1),e._v(" "),r("div",{staticClass:"box d3"},[r("van-cell-group",[r("van-field",{attrs:{label:e.textBest},model:{value:e.form.limitPrice,callback:function(t){e.$set(e.form,"limitPrice",t)},expression:"form.limitPrice"}})],1),e._v(" "),r("van-cell-group",[r("van-field",{attrs:{label:e.textFloor},model:{value:e.form.orderFloorPrice,callback:function(t){e.$set(e.form,"orderFloorPrice",t)},expression:"form.orderFloorPrice"}})],1),e._v(" "),r("van-cell-group",[r("van-field",{attrs:{label:e.textCeil},model:{value:e.form.orderCeilPrice,callback:function(t){e.$set(e.form,"orderCeilPrice",t)},expression:"form.orderCeilPrice"}})],1)],1),e._v(" "),r("div",{staticClass:"box"},[r("span",{staticClass:"text-pay"},[e._v(e._s(e.$t("common.yiJiaText1")))]),e._v(" "),r("van-cell-group",{staticClass:"over-percent"},[r("van-field",{attrs:{type:"number"},model:{value:e.form.maxOrderLimit,callback:function(t){e.$set(e.form,"maxOrderLimit",t)},expression:"form.maxOrderLimit"}})],1)],1),e._v(" "),r("div",{staticClass:"box"},[r("span",{staticClass:"text-pay"},[e._v("\n        "+e._s(e.$t("advertisement.adShouXuFei5",{msg1:e.textTrade}))+":\n      ")]),e._v(" "),r("van-cell-group",{staticClass:"over-percent"},[r("van-field",{model:{value:e.form.autoReplyBefore,callback:function(t){e.$set(e.form,"autoReplyBefore",t)},expression:"form.autoReplyBefore"}})],1)],1),e._v(" "),r("div",{staticClass:"box"},[r("span",{staticClass:"text-pay"},[e._v(e._s(e.$t("common.biXuChengJiaoCiShu")))]),e._v(" "),r("van-cell-group",{staticClass:"over-percent"},[r("van-field",{attrs:{type:"number"},model:{value:e.form.tradeCountLimit,callback:function(t){e.$set(e.form,"tradeCountLimit",t)},expression:"form.tradeCountLimit"}})],1)],1),e._v(" "),r("div",{staticClass:"box d2"},[r("div",{staticClass:"allow-pay"},[r("span",{staticClass:"text-pay"},[e._v(e._s(e.$t("advertisement.maiJixXianZhi"))+"：")]),e._v(" "),r("van-cell-group",[r("van-cell",{attrs:{title:e.$t("common.duiFangBiXuShouJiYanZheng")}},[r("van-checkbox",{model:{value:e.form.isIdentityVerify,callback:function(t){e.$set(e.form,"isIdentityVerify",t)},expression:"form.isIdentityVerify"}})],1),e._v(" "),r("van-cell",{attrs:{title:e.$t("common.duiFangBiXuErCiYanZheng")}},[r("van-checkbox",{model:{value:e.form.isadvancedVerify,callback:function(t){e.$set(e.form,"isadvancedVerify",t)},expression:"form.isadvancedVerify"}})],1)],1)],1)]),e._v(" "),r("div",{staticClass:"submit"},[r("van-button",{attrs:{type:"primary",disabled:e.forbiddenSubmit},on:{click:e._submitAdver}},[e._v(e._s(e.$t("advertisement.faBuJiaoYi")))])],1)]):e._e()},staticRenderFns:[]};var h=r("VU/8")(v,d,!1,function(e){r("Mhjh"),r("8R2g")},"data-v-77cd9470",null).exports,y={data:function(){return{ruleInfo:{},currencyArr:[],fiatCurrency:[],exchangeArr:[],overPercentLimit:{},loading:!1,payTypeCanUseArr:[]}},created:function(){this._getUserDetail(),this._getCommon()},methods:{_getUserDetail:function(){var e=this;Object(n.d)().then(function(t){0==t.code&&(e.payTypeCanUseArr=t.data.tradeQRCode||[],console.log(e.payTypeCanUseArr))})},updatePreset:function(e){this._getPreset({tradeType:e.tradeType,currency:e.currency,fiatCurrency:e.fiatCurrency})},_getPreset:function(e){var t=this,r=e.tradeType,i=void 0===r?"buy":r,o=e.currency,a=void 0===o?"BTC":o,c=e.fiatCurrency,s=void 0===c?"CNY":c;this.loading=!0,Object(n.c)({tradeType:i,currency:a,fiatCurrency:s}).then(function(e){if(t.loading=!1,0===e.code){var r={trade:"sell"};r.currency=e.data.currency,r.adVisibleTime=e.data.adVisibleTime,r.orderFeePercent=100*e.data.orderFeePercent,r.minAmount=e.data.minAvailableAmountOfSell,r.advertiseCostAmount=e.data.advertiseCostAmount,r.officialFeePercent=100*(1-e.data.officialFeePercent),r.officialFee=e.data.officialCurrency,r.adverFee=e.data.advertiseFeeSetting,r.orderFee=e.data.orderFeeSetting,t.ruleInfo=r,t.exchangeArr=e.data.exchange,t.overPercentLimit=e.data.overPercentLimit}}).catch(function(e){t.loading=!1})},_getCommon:function(){var e=this;Object(i.a)().then(function(t){if(0===t.code){e.currencyArr=t.data.currency,e.fiatCurrency=t.data.fiatCurrency;var r="BTC";e.currencyArr.length>0&&(r=e.currencyArr[0]),e._getPreset({tradeType:"buy",currency:r,fiatCurrency:"CNY"})}})}},components:{Rule:o.a,AdForm:h}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"advertisement"},[r("g-head",[r("van-nav-bar",{attrs:{title:e.$t("advertisement.fabuGuangGao")}})],1),e._v(" "),r("rule",{attrs:{ruleInfo:e.ruleInfo}}),e._v(" "),r("ad-form",{attrs:{payTypeCanUseArr:e.payTypeCanUseArr,currencyArr:e.currencyArr,fiatCurrency:e.fiatCurrency,exchangeArr:e.exchangeArr,overPercentLimit:e.overPercentLimit},on:{updatePreset:e.updatePreset}}),e._v(" "),e.loading?r("my-loading"):e._e()],1)},staticRenderFns:[]};var p=r("VU/8")(y,_,!1,function(e){r("WpiL")},"data-v-55ecaba0",null);t.default=p.exports},WpiL:function(e,t){},wnNT:function(e,t,r){"use strict";var n={props:{ruleInfo:Object}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"rule"},[e.ruleInfo.trade?r("ul",["sell"===e.ruleInfo.trade?r("li",[e._v("\n       "+e._s(e.$t("advertisement.chuShou"))+" "),r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v("\n       "+e._s(e.$t("advertisement.guangGaoZuiDiYuE"))+" "),r("strong",[e._v(e._s(e.ruleInfo.minAmount))]),e._v(",\n       "+e._s(e.$t("advertisement.pleaseSureHasEnough"))+" "),r("strong",[e._v(e._s(e.ruleInfo.currency))])]):e._e(),e._v(" "),"self"===e.ruleInfo.adverFee?r("li",[e._v("\n      "+e._s(e.$t("advertisement.faBu"))+" "),r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v("\n      "+e._s(e.$t("advertisement.guangGaoShouQu"))+" "),r("strong",[e._v(e._s(e.ruleInfo.advertiseCostAmount))]),e._v(" "),r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v(" "+e._s(e.$t("advertisement.guangGaoFei"))+"\n    ")]):e._e(),e._v(" "),"official"===e.ruleInfo.adverFee?r("li",[e._v("\n         "+e._s(e.$t("advertisement.faBu"))+" "),r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v("\n         "+e._s(e.$t("advertisement.guangGaoShouQuJiaZhi"))),r("strong",[e._v(e._s(e.ruleInfo.advertiseCostAmount))]),e._v(" "),r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v("  "+e._s(e.$t("advertisement.de"))+"\n        "),r("strong",[e._v(e._s(e.ruleInfo.officialFee))])]):e._e(),e._v(" "),"optional"===e.ruleInfo.adverFee?r("li",[e._v("\n      "+e._s(e.$t("advertisement.faBu"))+" "),r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v("\n      "+e._s(e.$t("advertisement.guangGaoShouQu"))+" "),r("strong",[e._v(e._s(e.ruleInfo.advertiseCostAmount))]),e._v(" "),r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v(" "+e._s(e.$t("advertisement.guangGaoFei"))+"，\n      "+e._s(e.$t("advertisement.youCanUse"))+" "),r("strong",[e._v(e._s(e.ruleInfo.officialFee))]),e._v("\n      "+e._s(e.$t("advertisement.zhiFu"))+" "+e._s(e.ruleInfo.officialFeePercent)+"% "+e._s(e.$t("advertisement.zeKou"))+"）\n    ")]):e._e(),e._v(" "),"self"===e.ruleInfo.orderFee||e.ruleInfo.currency===e.ruleInfo.officialFee?r("li",[r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v(" "+e._s(e.$t("advertisement.adShouXuFei"))+"\n      "),r("strong",[e._v(e._s(e.ruleInfo.orderFeePercent)+"%")]),e._v("，\n     "+e._s(e.$t("advertisement.adShouXuFei2"))+"\n    ")]):"official"===e.ruleInfo.orderFee?r("li",[r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v("  "+e._s(e.$t("advertisement.adShouXuFei3"))+"\n        "),r("strong",[e._v(e._s(e.ruleInfo.orderFeePercent)+"%")]),e._v(" "),r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v(" "+e._s(e.$t("advertisement.de"))+"\n        "),r("strong",[e._v(e._s(e.ruleInfo.officialFee))]),e._v("，\n        "+e._s(e.$t("advertisement.adShouXuFei2"))+"\n    ")]):"optional"===e.ruleInfo.orderFee?r("li",[r("strong",[e._v(e._s(e.ruleInfo.currency))]),e._v("  "+e._s(e.$t("advertisement.adShouXuFei"))+"\n        "),r("strong",[e._v(e._s(e.ruleInfo.orderFeePercent)+"%")]),e._v("，\n         "+e._s(e.$t("advertisement.adShouXuFei2"))+"\n        "+e._s(e.$t("advertisement.youCanUse"))+" "),r("strong",[e._v(e._s(e.ruleInfo.officialFee))]),e._v("\n        "+e._s(e.$t("advertisement.zhiFu"))+" （"+e._s(e.ruleInfo.officialFeePercent)+"%   "+e._s(e.$t("advertisement.zeKou"))+"）\n    ")]):e._e(),e._v(" "),r("li",[e._v("\n       "+e._s(e.$t("advertisement.guangGaoYouXiaoQi"))+"\n      "),r("strong",[e._v(e._s(e.ruleInfo.adVisibleTime/864e5))]),e._v("\n      "+e._s(e.$t("advertisement.adShouXuFei4"))+"\n    ")])]):e._e()])},staticRenderFns:[]};var o=r("VU/8")(n,i,!1,function(e){r("/wzs")},"data-v-4611381b",null);t.a=o.exports}});