webpackJsonp([3],{CVqC:function(t,e,n){"use strict";var r={props:{speed:{type:Number,default:50}},data:function(){return{}},mounted:function(){var t=this;this.$nextTick().then(function(){var e=document.querySelector("#marquee"),n=document.querySelector("#con1");t.timmer=setInterval(function(){t.scrollUp(e,n)},t.speed)})},destroyed:function(){clearInterval(this.timmer)},methods:{scrollUp:function(t,e){t.scrollLeft>=e.clientWidth?t.scrollTop=0:t.scrollLeft++}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"marquee",attrs:{id:"marquee"}},[e("div",{attrs:{id:"con1"}},[this._t("default")],2)])},staticRenderFns:[]};var a=n("VU/8")(r,i,!1,function(t){n("c686")},"data-v-50e1c97d",null);e.a=a.exports},Cdx3:function(t,e,n){var r=n("sB3e"),i=n("lktj");n("uqUo")("keys",function(){return function(t){return i(r(t))}})},E51n:function(t,e){},"Edp+":function(t,e){},FnlI:function(t,e){},N8lA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("fZjL"),i=n.n(r),a=n("Dd8w"),s=n.n(a),c=n("woOf"),o=n.n(c),u=n("1zv/"),l=n("NYxO"),d={props:{refresh:{type:Number,default:0}},data:function(){return{totalList:[],loading:!1,fiatCurrency:"",currency:"",trade:"",pageSize:10,total:0,page:1,isRefresh:!1,refreshEnd:!0}},computed:s()({adverParams:function(){return{currency:this.currency,tradeType:this.trade,fiatCurrency:this.fiatCurrency,sort:"priceAsc",pageSize:this.pageSize}},finished:function(){return this.page*this.pageSize>=this.total},noData:function(){return!this.loading&&0===this.totalList.length},tradeText:function(){return"buy"===this.trade?this.$t("common.gouMai"):this.$t("common.chushou")}},Object(l.b)(["getTradeSearch"])),watch:{adverParams:{handler:function(t){this.page=1,this.totalList=[],this.loading?this.refreshEnd=!1:this._getAdverList()},deep:!0},refresh:function(t){var e=this;this.isRefresh=!0,this.page=1,this.totalList=[],this._getAdverList(!0).then(function(){e.isRefresh=!1,e.$emit("refreshEnd")})},getTradeSearch:{handler:function(t){this.fiatCurrency=t.fiatCurrency||"CNY",this.currency=t.currency||"BTC",this.trade=t.tradeType||"buy"},deep:!0,immediate:!0},loading:function(t){var e=this;this.$emit("loadingChange",t),t||this.refreshEnd||(this.page=1,this.totalList=[],this._getAdverList().then(function(){e.refreshEnd=!0}))}},created:function(){this.init()},methods:{init:function(){this.refreshEnd=!0},_getAdverList:function(){var t=this;return this.isRefresh||(this.loading=!0),Object(u.f)(o()({},this.adverParams,{page:this.page})).then(function(e){if(t.loading=!1,0===e.code)return 1===t.page&&(t.totalList=e.data.list),t.total=e.data.count,e.data.list}).catch(function(e){t.loading=!1})},loadList:function(){var t=this;this.finished||this.isRefresh||(this.timmer&&clearTimeout(this.timmer),this.page+=1,this._getAdverList().then(function(e){e&&(t.totalList=t.totalList.concat(e))}))}},components:{}},h={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"trade-list"},[r("van-list",{attrs:{finished:t.finished,offset:10},on:{load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.totalList,function(e,i){return t.totalList.length>0?r("van-cell",{key:i},[[r("router-link",{staticClass:"trade-adver",attrs:{to:"/trade/offers/"+e._id}},[r("div",{staticClass:"avatar"},[e.owner.avatar?r("img",{staticStyle:{"border-radius":"50%"},attrs:{src:e.owner.avatar}}):r("img",{attrs:{src:n("pBnh")}})]),t._v(" "),r("div",{staticClass:"main"},[r("div",{staticClass:"name"},[r("span",[t._v(t._s(e.owner.name))]),t._v(" "),t._l(e.allowPay,function(t){return r("img",{key:t,attrs:{src:n("Rjej")("./payment_"+t+".png")}})})],2),t._v(" "),r("div",{staticClass:"price"},[t._v("\n              "+t._s(t.$t("common.price"))+": "+t._s(e.floatPrice.toFixed(6))+" "+t._s(e.fiatCurrency)+"\n            ")]),t._v(" "),r("div",{staticClass:"info"},[t._v("\n               "+t._s(t.$t("common.jiaoYi"))+" "+t._s(e.owner.tradeCount)+" |\n               "+t._s(t.$t("common.haoPing"))+" "+t._s((100*e.owner.positiveRate).toFixed(2)+"%")+"\n            ")]),t._v(" "),r("div",{staticClass:"limit"},[t._v("\n              "+t._s(t.$t("common.xianE"))+": "+t._s(e.orderFloorPrice.toFixed(2))+" - "+t._s(e.orderCeilPrice.toFixed(2))+"\n              "+t._s("buy"===t.trade?e.fiatCurrency:e.currency)+"\n            ")])]),t._v(" "),r("div",{staticClass:"button"},[r("van-button",{attrs:{type:"primary",size:"mini"}},[t._v(t._s(t.tradeText))])],1)])]],2):t._e()})),t._v(" "),t.noData?r("no-data"):t._e()],1)},staticRenderFns:[]};var f=n("VU/8")(d,h,!1,function(t){n("E51n")},"data-v-0112ccf4",null).exports,m=n("CVqC"),v=n("t5DY"),g={data:function(){return{refresh:0,isLoading:!1,loading:!1,currencyList:[],search:!1,fiatCurrencyObj:{},currency:"",ordersData:[],timmer:null}},computed:s()({activeCurrency:function(){return this.currencyList?this.currencyList.indexOf(this.currency):0},columns:function(){return this.fiatCurrencyObj.CNY?[{values:i()(this.fiatCurrencyObj),className:"column1"},{values:this.fiatCurrencyObj.CNY,className:"column2"}]:[]},select:function(){return"sell"===this.getTradeSearch.tradeType?2:1}},Object(l.b)(["getTradeSearch","getCommon"])),watch:{getTradeSearch:{handler:function(t){this.currency=t.currency||"BTC"},deep:!0,immediate:!0},getCommon:{handler:function(t){var e=this;this.timmer&&clearInterval(this.timmer);var n=t?t.lampRefresh:10;this.timmer=setInterval(function(){e._getOrdersInfo()},1e3*n)},deep:!0,immediate:!0}},created:function(){this._getOrdersInfo(!0),this._getCommon(),this.$store.commit("setFooterActive","outTrade"),this.$store.commit("setShowFooter",1)},destroyed:function(){clearInterval(this.timmer)},methods:{cut:function(t){this.trade=1===t?"buy":"sell",this.$store.commit("setTradeSearch",{tradeType:this.trade})},onRefresh:function(){this.refresh+=1},refreshEnd:function(){this.$toast(this.$t("common.shuaXinSuccess")),this.isLoading=!1},cutTabs:function(){this.currency=arguments.length<=1?void 0:arguments[1],this.$store.commit("setTradeSearch",{currency:arguments.length<=1?void 0:arguments[1]})},handleSelect:function(t,e){t.setColumnValues(1,this.fiatCurrencyObj[e[0]])},cancelSelect:function(){this.search=!1},confirmSelect:function(t){this.$store.commit("setTradeSearch",{fiatCurrency:t[0],currency:t[1]}),this.currency=t[1],this.search=!1},handleClickAdver:function(){this.$router.push("/advertisement")},loadingChange:function(t){this.loading=t},_getCommon:function(){var t=this;Object(v.a)("yes").then(function(e){0===e.code&&(t.currencyList=e.data.currency,e.data.fiatCurrency.forEach(function(e){t.fiatCurrencyObj[e.name]=t.currencyList}))})},_getOrdersInfo:function(t){var e=this;Object(v.b)(t).then(function(t){t&&(e.ordersData=e.ordersData.concat(t.slice(0,2))),e.ordersData.length>60&&(e.ordersData=[])}).catch(function(t){console.error(t)})}},components:{TradeList:f,MyMarquee:m.a}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trade"},[n("g-head",[n("van-nav-bar",[n("div",{staticClass:"head-cut",attrs:{slot:"title"},slot:"title"},[n("div",{staticClass:"left",class:{active:1===t.select},on:{click:function(e){t.cut(1)}}},[t._v(t._s(t.$t("common.buyCurrency")))]),t._v(" "),n("div",{staticClass:"right",class:{active:2===t.select},on:{click:function(e){t.cut(2)}}},[t._v(t._s(t.$t("common.sellCurrency")))])]),t._v(" "),n("div",{attrs:{slot:"right"},slot:"right"},[n("van-icon",{attrs:{name:"search"},on:{click:function(e){t.search=!t.search}}})],1),t._v(" "),n("van-icon",{attrs:{slot:"left",name:"add-o"},on:{click:t.handleClickAdver},slot:"left"})],1)],1),t._v(" "),n("div",{staticClass:"currency"},[n("van-tabs",{attrs:{duration:.5,active:t.activeCurrency},on:{click:t.cutTabs}},t._l(t.currencyList,function(t,e){return n("van-tab",{key:e,attrs:{title:t}})}))],1),t._v(" "),n("van-pull-refresh",{attrs:{"loosing-text":t.$t("loading.siFangJikeShuaXin"),"loading-text":t.$t("loading.jiaZaiZhong"),"pulling-text":t.$t("loading.xiaLaJiKeShuaXin")},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("trade-list",{attrs:{refresh:t.refresh},on:{refreshEnd:t.refreshEnd,loadingChange:t.loadingChange}})],1),t._v(" "),t.fiatCurrencyObj.CNY?n("van-popup",{attrs:{position:"bottom"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("van-picker",{attrs:{"show-toolbar":"",title:t.$t("common.pleaseChoose"),"cancel-button-text":t.$t("common.cancel"),"confirm-button-text":t.$t("common.sure"),columns:t.columns},on:{cancel:t.cancelSelect,confirm:t.confirmSelect,change:t.handleSelect}})],1):t._e(),t._v(" "),n("my-marquee",t._l(t.ordersData,function(e,r){return n("span",{key:r,staticStyle:{"margin-right":"24px","font-size":"12px"}},[t._v("\n      "+t._s("buy"===e.order.type?e.order.customer+" "+t.$t("common.use")+" "+e.order.fiatCurrency+" "+t.$t("common.gouMai")+"\n          "+e.order.amount.toFixed(6)+e.order.currency+" "+t.format(e.time,"hh:mm:ss"):e.order.customer+" "+t.$t("common.maiChu")+" "+e.order.amount.toFixed(8)+e.order.currency+" "+t.$t("common.huanQu")+" "+e.order.fiatCurrency+" "+t.format(e.time,"hh:mm:ss"))+"\n    ")])})),t._v(" "),t.loading?n("my-loading"):t._e()],1)},staticRenderFns:[]};var p=n("VU/8")(g,y,!1,function(t){n("FnlI"),n("Edp+")},"data-v-7bd676ea",null);e.default=p.exports},c686:function(t,e){},fZjL:function(t,e,n){t.exports={default:n("jFbC"),__esModule:!0}},jFbC:function(t,e,n){n("Cdx3"),t.exports=n("FeBl").Object.keys},uqUo:function(t,e,n){var r=n("kM2E"),i=n("FeBl"),a=n("S82l");t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*a(function(){n(1)}),"Object",s)}}});