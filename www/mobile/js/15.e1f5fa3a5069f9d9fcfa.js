webpackJsonp([15],{Svzs:function(t,e){},YPmv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("BO1k"),i=n.n(o),a=n("nv77"),c=n("Q1XB"),s=n.n(c),l=(n("Izdj"),{mixins:["systemConfigMixins"],data:function(){return{active:0,email:"",password:"",logining:!1,phone:"",loginType:!0,countryArr:[],callingCode:"86",selectPhoneText:"CN +86",selectPhoneCode:!1}},computed:{disabled:function(){return!((this.email||this.phone)&&this.password&&!this.logining)}},created:function(){this.$store.commit("setShowFooter",1),this.getCountryArr()},watch:{active:function(t){console.log(t)}},methods:{selectLoginWays:function(t){this.phone=this.email=this.password="",this.loginType=!t},onClickLeft:function(){this.$router.push("/account")},onClickRight:function(){this.$router.push("/user/register")},hint:function(){this.$router.push({path:"/user/find-pass"})},codeLogin:function(){this.$router.push({path:"/valicode/login"})},handleLogin:function(){this._login()},_login:function(){var t=this;if(this.logining=!0,this.callingCode){var e={};e=this.loginType?{phone:this.callingCode+""+this.phone,passwd:this.sha1(this.password),authMode:"phone"}:{email:this.email,passwd:this.sha1(this.password),authMode:"email"},Object(a.c)(e).then(function(n){if(0===n.code)if(n.data.token){t.$store.commit("setToken",n.data.token),t.$store.commit("setUserInfo",null);var o=$vm.routeState;o?location.href=o:t.$router.push("/trade")}else n.data.expire&&(t.$store.commit("setTwoStep",{email:t.email,expire:n.data.expire,phone:t.callingCode+""+t.phone,authMode:e.authMode}),t.$router.push("/account/two-step"));t.logining=!1}).catch(function(e){t.logining=!1})}else this.$toast.fail(this.$t("account.selectRegion1"))},getCountryArr:function(){this.countryArr=s.a.map(function(t){return t.name})},onChangeCountry:function(t){var e=!0,n=!1,o=void 0;try{for(var a,c=i()(s.a);!(e=(a=c.next()).done);e=!0){var l=a.value;if(l.name===t){this.callingCode=l.callingCode,this.selectPhoneText=l.code+" +"+l.callingCode;break}}}catch(t){n=!0,o=t}finally{try{!e&&c.return&&c.return()}finally{if(n)throw o}}this.selectPhoneCode=!1}},route:{canActivate:function(t){console.log("transition",t)}}}),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("g-head",[n("van-nav-bar",{attrs:{title:t.$t("account.login"),"left-text":t.$t("account.cancel"),"right-text":t.$t("account.register")},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}})],1),t._v(" "),n("van-tabs",{staticClass:"ways",on:{click:t.selectLoginWays},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{title:t.$t("account.phoneLogin")}}),t._v(" "),n("van-tab",{attrs:{title:t.$t("account.emailLogin")}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.loginType,expression:"loginType"}],staticClass:"box"},[n("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:t.selectPhoneCode,callback:function(e){t.selectPhoneCode=e},expression:"selectPhoneCode"}},[n("van-picker",{attrs:{columns:t.countryArr,"show-toolbar":""},on:{confirm:t.onChangeCountry,cancel:function(e){t.selectPhoneCode=!1}}})],1),t._v(" "),n("van-cell",{attrs:{title:t.$t("account.selectRegion"),"is-link":"",value:t.selectPhoneText},on:{click:function(e){t.selectPhoneCode=!0}}}),t._v(" "),n("van-cell-group",[n("van-field",{attrs:{label:t.$t("account.phoneNumber"),icon:"clear",placeholder:t.$t("account.inputPhoneNumber")},on:{"click-icon":function(e){t.phone=""}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),t._v(" "),n("van-cell-group",[n("van-field",{directives:[{name:"show",rawName:"v-show",value:!t.loginType,expression:"!loginType"}],attrs:{label:t.$t("account.email"),icon:"clear",autofocus:"autofocus",placeholder:t.$t("account.inputEmail"),required:""},on:{"click-icon":function(e){t.email=""}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),n("van-field",{attrs:{type:"password",label:t.$t("account.password"),icon:"clear",placeholder:t.$t("account.inputPwd"),required:""},on:{"click-icon":function(e){t.password=""}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("div",{staticClass:"submit"},[n("van-button",{attrs:{type:"primary",disabled:t.disabled},on:{click:t.handleLogin}},[t._v(t._s(t.$t("account.login")))])],1),t._v(" "),n("div",[n("span",{staticClass:"forget",on:{click:t.hint}},[t._v("\n      "+t._s(t.$t("account.forgotPwd"))+"\n    ")]),t._v(" "),n("span",{staticClass:"valicode",on:{click:t.codeLogin}},[t._v("\n      "+t._s(t.$t("account.valiLogin"))+"\n    ")])])],1)},staticRenderFns:[]};var u=n("VU/8")(l,r,!1,function(t){n("Svzs"),n("pRJv")},"data-v-5c2e2920",null);e.default=u.exports},pRJv:function(t,e){}});